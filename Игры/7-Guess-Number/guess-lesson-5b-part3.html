<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–£—Ä–æ–∫ 5b: –ì–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å (–ß–∞—Å—Ç—å 3) | –£–≥–∞–¥–∞–π —á–∏—Å–ª–æ</title>
    <style>
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        line-height: 1.6;
        margin: 0;
        padding: 0;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: #333;
        overflow-x: hidden;
      }

      .header {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        padding: 1rem 0;
        position: relative;
        overflow: hidden;
      }

      .header::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(
          45deg,
          rgba(255, 255, 255, 0.1) 25%,
          transparent 25%,
          transparent 75%,
          rgba(255, 255, 255, 0.1) 75%
        );
        background-size: 20px 20px;
        animation: headerPattern 20s linear infinite;
      }

      @keyframes headerPattern {
        0% {
          transform: translateX(0);
        }
        100% {
          transform: translateX(20px);
        }
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
        position: relative;
        z-index: 1;
      }

      .header h1 {
        margin: 0;
        color: white;
        font-size: 2.5rem;
        text-align: center;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
      }

      .subtitle {
        text-align: center;
        color: rgba(255, 255, 255, 0.9);
        margin-top: 0.5rem;
        font-size: 1.2rem;
      }

      .lesson-content {
        background: white;
        margin: 2rem auto;
        border-radius: 20px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
        overflow: hidden;
        max-width: 1000px;
        position: relative;
      }

      .section {
        padding: 40px 50px;
        border-bottom: 1px solid #f0f0f0;
      }

      .section:last-child {
        border-bottom: none;
      }

      .section h2 {
        color: #2c3e50;
        font-size: 2rem;
        margin-bottom: 1rem;
        position: relative;
        padding-left: 20px;
      }

      .section h2::before {
        content: "";
        position: absolute;
        left: 0;
        top: 50%;
        transform: translateY(-50%);
        width: 5px;
        height: 30px;
        background: linear-gradient(45deg, #667eea, #764ba2);
        border-radius: 3px;
      }

      .section h3 {
        color: #34495e;
        font-size: 1.5rem;
        margin-top: 2rem;
        margin-bottom: 1rem;
        padding-bottom: 0.5rem;
        border-bottom: 2px solid #ecf0f1;
      }

      .theory {
        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        border-left: 5px solid #667eea;
        padding: 25px;
        margin: 25px 0;
        border-radius: 10px;
        position: relative;
      }

      .theory::before {
        content: "üí°";
        position: absolute;
        top: 15px;
        left: -15px;
        background: #667eea;
        width: 30px;
        height: 30px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.2rem;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      }

      .practice {
        background: linear-gradient(135deg, #e8f5e8 0%, #d4edda 100%);
        border: 2px solid #4caf50;
        border-radius: 15px;
        padding: 30px;
        margin: 30px 0;
        position: relative;
        overflow: hidden;
      }

      .practice::before {
        content: "";
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(
          circle,
          rgba(76, 175, 80, 0.1) 0%,
          transparent 50%
        );
        animation: practiceGlow 3s ease-in-out infinite alternate;
      }

      @keyframes practiceGlow {
        0% {
          transform: rotate(0deg) scale(1);
        }
        100% {
          transform: rotate(180deg) scale(1.1);
        }
      }

      .code {
        background: #2c3e50;
        color: #ecf0f1;
        padding: 20px;
        border-radius: 10px;
        margin: 20px 0;
        font-family: "Consolas", "Monaco", monospace;
        font-size: 0.95rem;
        line-height: 1.5;
        overflow-x: auto;
        position: relative;
      }

      .code-title {
        background: #34495e;
        color: #ecf0f1;
        padding: 8px 15px;
        margin: -20px -20px 20px -20px;
        font-weight: bold;
        border-radius: 10px 10px 0 0;
        border-bottom: 2px solid #667eea;
      }

      .demo {
        border: 3px solid #667eea;
        border-radius: 15px;
        padding: 30px;
        margin: 30px 0;
        background: linear-gradient(135deg, #f8f9ff 0%, #eef2ff 100%);
        text-align: center;
        position: relative;
        box-shadow: 0 10px 30px rgba(102, 126, 234, 0.2);
      }

      .demo h4 {
        color: #667eea;
        margin-top: 0;
        font-size: 1.3rem;
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      /* –ß–µ–ª–ª–µ–Ω–¥–∂–∏ —Å—Ç–∏–ª–∏ */
      .challenge-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 20px;
        margin: 20px 0;
      }

      .challenge-card {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border-radius: 15px;
        padding: 25px;
        position: relative;
        overflow: hidden;
        transition: all 0.3s ease;
        cursor: pointer;
      }

      .challenge-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 35px rgba(102, 126, 234, 0.4);
      }

      .challenge-card::before {
        content: "";
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: conic-gradient(
          from 0deg,
          transparent,
          rgba(255, 255, 255, 0.1),
          transparent
        );
        animation: challengeRotate 4s linear infinite;
      }

      @keyframes challengeRotate {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      .challenge-card.completed {
        background: linear-gradient(135deg, #4caf50 0%, #45a049 100%);
      }

      .challenge-card.locked {
        background: linear-gradient(135deg, #95a5a6 0%, #7f8c8d 100%);
        cursor: not-allowed;
      }

      .challenge-icon {
        font-size: 3rem;
        margin-bottom: 15px;
        position: relative;
        z-index: 1;
      }

      .challenge-title {
        font-size: 1.3rem;
        font-weight: bold;
        margin-bottom: 10px;
        position: relative;
        z-index: 1;
      }

      .challenge-description {
        font-size: 0.9rem;
        opacity: 0.9;
        margin-bottom: 15px;
        position: relative;
        z-index: 1;
      }

      .challenge-reward {
        background: rgba(255, 255, 255, 0.2);
        padding: 10px 15px;
        border-radius: 20px;
        font-weight: bold;
        position: relative;
        z-index: 1;
      }

      .challenge-progress {
        background: rgba(0, 0, 0, 0.2);
        height: 8px;
        border-radius: 4px;
        margin: 15px 0 10px 0;
        overflow: hidden;
        position: relative;
        z-index: 1;
      }

      .challenge-progress-fill {
        background: linear-gradient(90deg, #ffd700, #ffed4e);
        height: 100%;
        border-radius: 4px;
        transition: width 0.5s ease;
        box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
      }

      .challenge-progress-text {
        font-size: 0.8rem;
        text-align: center;
        opacity: 0.8;
        position: relative;
        z-index: 1;
      }

      /* –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏ */
      .daily-challenges {
        background: linear-gradient(135deg, #ff9800 0%, #f57c00 100%);
        border-radius: 15px;
        padding: 25px;
        color: white;
        margin: 20px 0;
      }

      .daily-header {
        text-align: center;
        margin-bottom: 25px;
        padding-bottom: 15px;
        border-bottom: 2px solid rgba(255, 255, 255, 0.2);
      }

      .daily-timer {
        font-size: 2rem;
        font-weight: bold;
        margin: 10px 0;
      }

      .daily-tasks {
        display: flex;
        flex-direction: column;
        gap: 15px;
      }

      .daily-task {
        background: rgba(255, 255, 255, 0.1);
        padding: 15px 20px;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        backdrop-filter: blur(10px);
      }

      .daily-task.completed {
        background: rgba(76, 175, 80, 0.3);
      }

      .task-info {
        flex: 1;
        text-align: left;
      }

      .task-title {
        font-weight: bold;
        margin-bottom: 5px;
      }

      .task-progress {
        font-size: 0.9rem;
        opacity: 0.8;
      }

      .task-reward {
        background: rgba(255, 255, 255, 0.2);
        padding: 8px 15px;
        border-radius: 15px;
        font-weight: bold;
      }

      /* –ö–Ω–æ–ø–∫–∏ –¥–µ–º–æ */
      .demo-controls {
        display: flex;
        gap: 15px;
        justify-content: center;
        margin: 20px 0;
        flex-wrap: wrap;
      }

      .demo-btn {
        background: linear-gradient(45deg, #667eea, #764ba2);
        color: white;
        border: none;
        padding: 12px 24px;
        border-radius: 25px;
        cursor: pointer;
        font-weight: bold;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
        box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
      }

      .demo-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
      }

      .demo-btn:active {
        transform: translateY(0);
      }

      .demo-btn.success {
        background: linear-gradient(45deg, #4caf50, #45a049);
      }

      .demo-btn.warning {
        background: linear-gradient(45deg, #ff9800, #f57c00);
      }

      .demo-btn.danger {
        background: linear-gradient(45deg, #f44336, #d32f2f);
      }

      /* –°–∏—Å—Ç–µ–º–∞ —Å—Ç—Ä–∏–∫–æ–≤ */
      .streak-display {
        background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
        color: white;
        border-radius: 15px;
        padding: 25px;
        margin: 20px 0;
        text-align: center;
        position: relative;
        overflow: hidden;
      }

      .streak-display::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(
          45deg,
          transparent,
          rgba(255, 255, 255, 0.1),
          transparent
        );
        animation: streakShine 3s ease-in-out infinite;
      }

      @keyframes streakShine {
        0%,
        100% {
          transform: translateX(-100%);
        }
        50% {
          transform: translateX(100%);
        }
      }

      .streak-number {
        font-size: 4rem;
        font-weight: bold;
        margin-bottom: 10px;
        position: relative;
        z-index: 1;
      }

      .streak-label {
        font-size: 1.2rem;
        opacity: 0.9;
        position: relative;
        z-index: 1;
      }

      .streak-calendar {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
        gap: 5px;
        margin: 20px 0;
        position: relative;
        z-index: 1;
      }

      .calendar-day {
        width: 30px;
        height: 30px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.2);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.8rem;
        transition: all 0.3s ease;
      }

      .calendar-day.completed {
        background: rgba(255, 255, 255, 0.8);
        color: #e74c3c;
        transform: scale(1.1);
      }

      .calendar-day.today {
        border: 2px solid rgba(255, 255, 255, 0.8);
      }

      .next-lesson {
        display: inline-block;
        background: linear-gradient(45deg, #4caf50, #45a049);
        color: white;
        text-decoration: none;
        padding: 15px 30px;
        border-radius: 25px;
        font-weight: bold;
        text-align: center;
        transition: all 0.3s ease;
        box-shadow: 0 5px 15px rgba(76, 175, 80, 0.3);
        margin-top: 20px;
      }

      .next-lesson:hover {
        transform: translateY(-3px);
        box-shadow: 0 10px 25px rgba(76, 175, 80, 0.4);
      }

      @media (max-width: 768px) {
        .container {
          padding: 0 15px;
        }

        .section {
          padding: 30px 25px;
        }

        .header h1 {
          font-size: 2rem;
        }

        .demo-controls {
          flex-direction: column;
          align-items: center;
        }

        .challenge-grid {
          grid-template-columns: 1fr;
        }

        .daily-task {
          flex-direction: column;
          text-align: center;
          gap: 10px;
        }
      }
    </style>
  </head>

  <body>
    <div class="header">
      <div class="container">
        <h1>üéØ –ß–µ–ª–ª–µ–Ω–¥–∂–∏ –∏ –º–æ—Ç–∏–≤–∞—Ü–∏—è</h1>
        <div class="subtitle">–ß–∞—Å—Ç—å 3: –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–∞—è –≤–æ–≤–ª–µ—á–µ–Ω–Ω–æ—Å—Ç—å –∏–≥—Ä–æ–∫–æ–≤</div>
      </div>
    </div>

    <div class="lesson-content">
      <div class="section">
        <h2>üèÖ –ß—Ç–æ —Ç–∞–∫–æ–µ —á–µ–ª–ª–µ–Ω–¥–∂–∏?</h2>

        <div class="theory">
          <h3>–ß–µ–ª–ª–µ–Ω–¥–∂–∏ –∫–∞–∫ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –≤–æ–≤–ª–µ—á–µ–Ω–Ω–æ—Å—Ç–∏</h3>
          <p>
            –ß–µ–ª–ª–µ–Ω–¥–∂–∏ (–≤—ã–∑–æ–≤—ã) ‚Äî —ç—Ç–æ –æ—Å–æ–±—ã–µ –∑–∞–¥–∞—á–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–µ–¥–ª–∞–≥–∞—é—Ç –∏–≥—Ä–æ–∫–∞–º
            –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ü–µ–ª–∏ –∏ –º–æ—Ç–∏–≤–∞—Ü–∏—é –¥–ª—è –∏–≥—Ä—ã. –û–Ω–∏ —Å–æ–∑–¥–∞—é—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É
            –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è –∏ –ø–æ–º–æ–≥–∞—é—Ç —É–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä–µ—Å –∏–≥—Ä–æ–∫–æ–≤ –Ω–∞
            –º–µ—Å—è—Ü—ã –≤–ø–µ—Ä–µ–¥.
          </p>

          <h4>–¢–∏–ø—ã —á–µ–ª–ª–µ–Ω–¥–∂–µ–π:</h4>
          <ul>
            <li>
              <strong>–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ</strong> ‚Äî –ø—Ä–æ—Å—Ç—ã–µ –∑–∞–¥–∞—á–∏, –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∫–∞–∂–¥—ã–π
              –¥–µ–Ω—å
            </li>
            <li><strong>–ù–µ–¥–µ–ª—å–Ω—ã–µ</strong> ‚Äî –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–µ —Ü–µ–ª–∏ –Ω–∞ –Ω–µ–¥–µ–ª—é</li>
            <li><strong>–°–µ–∑–æ–Ω–Ω—ã–µ</strong> ‚Äî –æ—Å–æ–±—ã–µ —Å–æ–±—ã—Ç–∏—è –∏ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</li>
            <li><strong>–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ</strong> ‚Äî –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –∏—Å–ø—ã—Ç–∞–Ω–∏—è</li>
            <li><strong>–°–æ—Ü–∏–∞–ª—å–Ω—ã–µ</strong> ‚Äî –≥—Ä—É–ø–ø–æ–≤—ã–µ –∑–∞–¥–∞—á–∏</li>
          </ul>
        </div>

        <div
          style="
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
          "
        >
          <div
            style="
              background: linear-gradient(135deg, #27ae60 0%, #229954 100%);
              color: white;
              padding: 20px;
              border-radius: 15px;
            "
          >
            <h4 style="margin-top: 0">‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —á–µ–ª–ª–µ–Ω–¥–∂–µ–π</h4>
            <ul style="margin: 0; padding-left: 20px">
              <li>–Ø—Å–Ω—ã–µ –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ —Ü–µ–ª–∏</li>
              <li>–†–µ–≥—É–ª—è—Ä–Ω—ã–µ –Ω–∞–≥—Ä–∞–¥—ã</li>
              <li>–†–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ –∏–≥—Ä–æ–≤–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞</li>
              <li>–ß—É–≤—Å—Ç–≤–æ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞</li>
            </ul>
          </div>
          <div
            style="
              background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
              color: white;
              padding: 20px;
              border-radius: 15px;
            "
          >
            <h4 style="margin-top: 0">üí° –ü—Ä–∏–Ω—Ü–∏–ø—ã –¥–∏–∑–∞–π–Ω–∞</h4>
            <ul style="margin: 0; padding-left: 20px">
              <li>–ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ —É—Å–ª–æ–∂–Ω–µ–Ω–∏–µ</li>
              <li>–°–ø—Ä–∞–≤–µ–¥–ª–∏–≤—ã–µ –Ω–∞–≥—Ä–∞–¥—ã</li>
              <li>–†–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ —Ç–∏–ø–æ–≤ –∑–∞–¥–∞—á</li>
              <li>–ü–æ–Ω—è—Ç–Ω—ã–µ —É—Å–ª–æ–≤–∏—è</li>
            </ul>
          </div>
        </div>
      </div>

      <div class="section">
        <h2>üìÖ –°–∏—Å—Ç–µ–º–∞ —á–µ–ª–ª–µ–Ω–¥–∂–µ–π</h2>

        <div class="theory">
          <h3>–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã</h3>
          <p>
            –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —á–µ–ª–ª–µ–Ω–¥–∂–µ–π —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–¥—É–º–∞–Ω–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã,
            –∫–æ—Ç–æ—Ä–∞—è —Å–º–æ–∂–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã –∑–∞–¥–∞—á, –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å
            –ø—Ä–æ–≥—Ä–µ—Å—Å –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è.
          </p>
        </div>

        <div class="code">
          <div class="code-title">–ö–ª–∞—Å—Å —Å–∏—Å—Ç–µ–º—ã —á–µ–ª–ª–µ–Ω–¥–∂–µ–π</div>
          class ChallengeSystem { constructor() { this.challenges = [];
          this.activeDaily = []; this.activeWeekly = []; this.playerProgress =
          {}; this.challengeTemplates = this.initializeTemplates(); }
          initializeTemplates() { return { daily: [ { id: 'daily_wins', title:
          '–ú–∞—Å—Ç–µ—Ä —É–≥–∞–¥—ã–≤–∞–Ω–∏—è', description: '–í—ã–∏–≥—Ä–∞–π {target} –∏–≥—Ä', icon: 'üéØ',
          target: 3, reward: { xp: 100, coins: 50 }, type: 'wins' }, { id:
          'daily_speed', title: '–°–∫–æ—Ä–æ—Å—Ç–Ω–æ–π –≥–µ–Ω–∏–π', description: '–í—ã–∏–≥—Ä–∞–π –∏–≥—Ä—É
          –∑–∞ {target} —Å–µ–∫—É–Ω–¥', icon: '‚ö°', target: 30, reward: { xp: 150, coins:
          75 }, type: 'time' }, { id: 'daily_attempts', title: '–¢–æ—á–Ω–æ—Å—Ç—å',
          description: '–£–≥–∞–¥–∞–π —á–∏—Å–ª–æ —Å {target} –ø–æ–ø—ã—Ç–æ–∫', icon: 'üé™', target: 3,
          reward: { xp: 200, coins: 100 }, type: 'attempts' } ], weekly: [ { id:
          'weekly_streak', title: '–ù–µ–¥–µ–ª—å–Ω—ã–π —á–µ–º–ø–∏–æ–Ω', description: '–ò–≥—Ä–∞–π
          {target} –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥', icon: 'üî•', target: 7, reward: { xp: 1000,
          coins: 500, badge: 'weekly_champion' }, type: 'streak' }, { id:
          'weekly_score', title: '–û—Ö–æ—Ç–Ω–∏–∫ –∑–∞ –æ—á–∫–∞–º–∏', description: '–ù–∞–±–µ—Ä–∏
          {target} –æ—á–∫–æ–≤ –∑–∞ –Ω–µ–¥–µ–ª—é', icon: 'üíé', target: 2000, reward: { xp:
          800, coins: 400 }, type: 'score' } ], seasonal: [ { id:
          'seasonal_master', title: '–ú–∞—Å—Ç–µ—Ä —Å–µ–∑–æ–Ω–∞', description: '–í—ã–∏–≥—Ä–∞–π
          {target} –∏–≥—Ä –≤ —ç—Ç–æ–º —Å–µ–∑–æ–Ω–µ', icon: 'üëë', target: 100, reward: { xp:
          5000, coins: 2500, badge: 'season_master' }, type: 'seasonal_wins' } ]
          }; } // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–≤—ã—Ö –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö —á–µ–ª–ª–µ–Ω–¥–∂–µ–π
          generateDailyChallenges() { this.activeDaily = []; // –í—ã–±–∏—Ä–∞–µ–º 3
          —Å–ª—É—á–∞–π–Ω—ã—Ö —á–µ–ª–ª–µ–Ω–¥–∂–∞ const shuffled =
          this.shuffleArray([...this.challengeTemplates.daily]); for (let i = 0;
          i < 3; i++) { const template = shuffled[i]; const challenge = {
          ...template, id: `${template.id}_${Date.now()}_${i}`, progress: 0,
          completed: false, expiresAt: this.getTomorrowMidnight(), createdAt:
          Date.now() }; this.activeDaily.push(challenge); }
          this.saveToStorage(); } // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —á–µ–ª–ª–µ–Ω–¥–∂–∞
          checkProgress(actionType, actionData) { const allChallenges =
          [...this.activeDaily, ...this.activeWeekly];
          allChallenges.forEach(challenge => { if (challenge.completed) return;
          switch (challenge.type) { case 'wins': if (actionType === 'game_won')
          { challenge.progress++; } break; case 'time': if (actionType ===
          'game_won' && actionData.time <= challenge.target) {
          challenge.progress = 1; } break; case 'attempts': if (actionType ===
          'game_won' && actionData.attempts <= challenge.target) {
          challenge.progress = 1; } break; case 'score': if (actionType ===
          'score_gained') { challenge.progress += actionData.amount; } break;
          case 'streak': if (actionType === 'daily_play') { challenge.progress =
          this.getCurrentStreak(); } break; } // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ if
          (challenge.progress >= challenge.target) {
          this.completeChallenge(challenge); } }); this.saveToStorage(); } //
          –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —á–µ–ª–ª–µ–Ω–¥–∂–∞ completeChallenge(challenge) {
          challenge.completed = true; challenge.completedAt = Date.now(); //
          –ù–∞—á–∏—Å–ª—è–µ–º –Ω–∞–≥—Ä–∞–¥—ã this.giveReward(challenge.reward); // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º
          —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ this.showCompletionNotification(challenge); // –ó–∞–ø–∏—Å—ã–≤–∞–µ–º
          –≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É this.recordChallengeCompletion(challenge); } // –í—ã–¥–∞—á–∞
          –Ω–∞–≥—Ä–∞–¥ giveReward(reward) { if (reward.xp) { // –î–æ–±–∞–≤–ª—è–µ–º –æ–ø—ã—Ç
          this.addExperience(reward.xp); } if (reward.coins) { // –î–æ–±–∞–≤–ª—è–µ–º
          –º–æ–Ω–µ—Ç—ã this.addCoins(reward.coins); } if (reward.badge) { // –í—ã–¥–∞–µ–º
          –∑–Ω–∞—á–æ–∫ this.unlockBadge(reward.badge); } } // –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
          —á–µ–ª–ª–µ–Ω–¥–∂–∞ –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö getChallengeProgress(challenge) { return
          Math.min((challenge.progress / challenge.target) * 100, 100); } //
          –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å—Ç–µ—á–µ–Ω–∏—è —á–µ–ª–ª–µ–Ω–¥–∂–µ–π checkExpiredChallenges() { const now =
          Date.now(); this.activeDaily = this.activeDaily.filter(challenge => {
          if (challenge.expiresAt <= now && !challenge.completed) {
          this.onChallengeExpired(challenge); return false; } return true; });
          // –ï—Å–ª–∏ –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö —á–µ–ª–ª–µ–Ω–¥–∂–µ–π, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–æ–≤—ã–µ if
          (this.activeDaily.length === 0) { this.generateDailyChallenges(); } }
          // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage saveToStorage() { const data = {
          activeDaily: this.activeDaily, activeWeekly: this.activeWeekly,
          playerProgress: this.playerProgress, lastUpdate: Date.now() };
          localStorage.setItem('challengeSystem', JSON.stringify(data)); } //
          –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ localStorage loadFromStorage() { const saved =
          localStorage.getItem('challengeSystem'); if (saved) { const data =
          JSON.parse(saved); this.activeDaily = data.activeDaily || [];
          this.activeWeekly = data.activeWeekly || []; this.playerProgress =
          data.playerProgress || {}; // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏—Å—Ç–µ–∫—à–∏–µ —á–µ–ª–ª–µ–Ω–¥–∂–∏
          this.checkExpiredChallenges(); } else {
          this.generateDailyChallenges(); } } // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
          shuffleArray(array) { for (let i = array.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1)); [array[i], array[j]] =
          [array[j], array[i]]; } return array; } getTomorrowMidnight() { const
          tomorrow = new Date(); tomorrow.setDate(tomorrow.getDate() + 1);
          tomorrow.setHours(0, 0, 0, 0); return tomorrow.getTime(); }
          getCurrentStreak() { // –ó–¥–µ—Å—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ª–æ–≥–∏–∫–∞ –ø–æ–¥—Å—á–µ—Ç–∞ —Ç–µ–∫—É—â–µ–π
          —Å–µ—Ä–∏–∏ return this.playerProgress.currentStreak || 0; } }
        </div>

        <div class="demo">
          <h4>–î–µ–º–æ: –°–∏—Å—Ç–µ–º–∞ —á–µ–ª–ª–µ–Ω–¥–∂–µ–π</h4>

          <div class="challenge-grid" id="challenge-grid">
            <!-- –ß–µ–ª–ª–µ–Ω–¥–∂–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã JavaScript -->
          </div>

          <div class="demo-controls">
            <button
              class="demo-btn success"
              onclick="completeRandomChallenge()"
            >
              –í—ã–ø–æ–ª–Ω–∏—Ç—å —á–µ–ª–ª–µ–Ω–¥–∂
            </button>
            <button class="demo-btn warning" onclick="addProgressToAll()">
              –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å
            </button>
            <button class="demo-btn danger" onclick="resetChallenges()">
              –°–±—Ä–æ—Å —á–µ–ª–ª–µ–Ω–¥–∂–µ–π
            </button>
          </div>
        </div>
      </div>

      <div class="section">
        <h2>üìã –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏</h2>

        <div class="theory">
          <h3>–í–∞–∂–Ω–æ—Å—Ç—å –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –∑–∞–¥–∞—á</h3>
          <p>
            –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏ ‚Äî —ç—Ç–æ –æ—Å–Ω–æ–≤–∞ —É–¥–µ—Ä–∂–∞–Ω–∏—è –∏–≥—Ä–æ–∫–æ–≤. –û–Ω–∏ —Å–æ–∑–¥–∞—é—Ç
            –ø—Ä–∏–≤—ã—á–∫—É –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å—Å—è –≤ –∏–≥—Ä—É –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –∏ –¥–∞—é—Ç —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –Ω–µ–±–æ–ª—å—à–∏–µ
            –Ω–∞–≥—Ä–∞–¥—ã, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–µ –º–æ—Ç–∏–≤–∞—Ü–∏—é.
          </p>

          <h4>–ü—Ä–∏–Ω—Ü–∏–ø—ã —Å–æ–∑–¥–∞–Ω–∏—è –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –∑–∞–¥–∞—á:</h4>
          <ul>
            <li>–î–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–∏–º—ã –∑–∞ 15-30 –º–∏–Ω—É—Ç</li>
            <li>–ù–µ –¥–æ–ª–∂–Ω—ã —Ç—Ä–µ–±–æ–≤–∞—Ç—å –æ—Å–æ–±—ã—Ö –Ω–∞–≤—ã–∫–æ–≤</li>
            <li>–î–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–º–∏</li>
            <li>–ù–∞–≥—Ä–∞–¥—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–Ω–∞—á–∏–º—ã–º–∏</li>
          </ul>
        </div>

        <div class="demo">
          <h4>–î–µ–º–æ: –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏</h4>

          <div class="daily-challenges">
            <div class="daily-header">
              <h3>üìÖ –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏</h3>
              <div class="daily-timer" id="daily-timer">23:45:12</div>
              <div>–¥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è</div>
            </div>

            <div class="daily-tasks" id="daily-tasks">
              <!-- –ó–∞–¥–∞—á–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã JavaScript -->
            </div>
          </div>
        </div>

        <div class="code">
          <div class="code-title">–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –∑–∞–¥–∞—á</div>
          function renderDailyTasks(tasks) { const container =
          document.getElementById('daily-tasks'); container.innerHTML = '';
          tasks.forEach(task => { const taskElement =
          document.createElement('div'); taskElement.className = `daily-task
          ${task.completed ? 'completed' : ''}`; const progressText = task.type
          === 'time' || task.type === 'attempts' ? (task.progress > 0 ?
          '–í—ã–ø–æ–ª–Ω–µ–Ω–æ!' : `0/${task.target}`) :
          `${task.progress}/${task.target}`; taskElement.innerHTML = `
          <div class="task-info">
            <div class="task-title">${task.icon} ${task.title}</div>
            <div class="task-progress">
              ${task.description.replace('{target}', task.target)}
              <br />–ü—Ä–æ–≥—Ä–µ—Å—Å: ${progressText}
            </div>
          </div>
          <div class="task-reward">+${task.reward.xp} XP</div>
          `; container.appendChild(taskElement); }); } // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–∞
          function updateDailyTimer() { const now = new Date(); const tomorrow =
          new Date(now); tomorrow.setDate(tomorrow.getDate() + 1);
          tomorrow.setHours(0, 0, 0, 0); const timeLeft = tomorrow.getTime() -
          now.getTime(); const hours = Math.floor(timeLeft / (1000 * 60 * 60));
          const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 *
          60)); const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
          document.getElementById('daily-timer').textContent =
          `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2,
          '0')}:${seconds.toString().padStart(2, '0')}`; }
        </div>
      </div>

      <div class="section">
        <h2>üî• –°–∏—Å—Ç–µ–º–∞ —Å—Ç—Ä–∏–∫–æ–≤</h2>

        <div class="theory">
          <h3>–°–∏–ª–∞ –ø—Ä–∏–≤—ã—á–∫–∏</h3>
          <p>
            –°—Ç—Ä–∏–∫ (streak) ‚Äî —ç—Ç–æ —Å–µ—Ä–∏—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –¥–Ω–µ–π –∏–≥—Ä—ã. –≠—Ç–∞ –º–µ—Ö–∞–Ω–∏–∫–∞
            —Å–æ–∑–¥–∞–µ—Ç —Å–∏–ª—å–Ω—É—é –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫—É—é –ø—Ä–∏–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å: —á–µ–º –¥–ª–∏–Ω–Ω–µ–µ —Å–µ—Ä–∏—è,
            —Ç–µ–º –±–æ–ª—å—à–µ –∏–≥—Ä–æ–∫ –±–æ–∏—Ç—Å—è –µ–µ –ø–æ—Ç–µ—Ä—è—Ç—å –∏ —Ç–µ–º —á–∞—â–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –∏–≥—Ä—É.
          </p>

          <h4>–ü—Å–∏—Ö–æ–ª–æ–≥–∏—è —Å—Ç—Ä–∏–∫–æ–≤:</h4>
          <ul>
            <li>
              <strong>–ë–æ—è–∑–Ω—å –ø–æ—Ç–µ—Ä–∏</strong> ‚Äî —Å—Ç—Ä–∞—Ö –ø–æ—Ç–µ—Ä—è—Ç—å –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–π
              –ø—Ä–æ–≥—Ä–µ—Å—Å
            </li>
            <li>
              <strong>–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–≤—ã—á–∫–∏</strong> ‚Äî –µ–∂–µ–¥–Ω–µ–≤–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
              —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π
            </li>
            <li>
              <strong>–°–æ—Ü–∏–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å</strong> ‚Äî –¥–ª–∏–Ω–Ω—ã–µ —Å—Ç—Ä–∏–∫–∏ –ø–æ–≤—ã—à–∞—é—Ç
              –ø—Ä–µ—Å—Ç–∏–∂
            </li>
            <li>
              <strong>–ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ —É—Å–∏–ª–µ–Ω–∏–µ</strong> ‚Äî –Ω–∞–≥—Ä–∞–¥—ã —Ä–∞—Å—Ç—É—Ç —Å –¥–ª–∏–Ω–æ–π
              —Å–µ—Ä–∏–∏
            </li>
          </ul>
        </div>

        <div class="demo">
          <h4>–î–µ–º–æ: –°–∏—Å—Ç–µ–º–∞ —Å—Ç—Ä–∏–∫–æ–≤</h4>

          <div class="streak-display">
            <div class="streak-number" id="streak-number">7</div>
            <div class="streak-label">–¥–Ω–µ–π –ø–æ–¥—Ä—è–¥</div>

            <div class="streak-calendar" id="streak-calendar">
              <!-- –ö–∞–ª–µ–Ω–¥–∞—Ä—å –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω JavaScript -->
            </div>

            <div style="margin-top: 20px">
              –°–ª–µ–¥—É—é—â–∞—è –Ω–∞–≥—Ä–∞–¥–∞ —á–µ—Ä–µ–∑ <strong id="next-milestone">3</strong> –¥–Ω—è
            </div>
          </div>

          <div class="demo-controls">
            <button class="demo-btn success" onclick="addStreakDay()">
              +1 –¥–µ–Ω—å
            </button>
            <button class="demo-btn warning" onclick="addStreakWeek()">
              +7 –¥–Ω–µ–π
            </button>
            <button class="demo-btn danger" onclick="breakStreak()">
              –°–ª–æ–º–∞—Ç—å —Å–µ—Ä–∏—é
            </button>
          </div>
        </div>

        <div class="code">
          <div class="code-title">–°–∏—Å—Ç–µ–º–∞ —Å—Ç—Ä–∏–∫–æ–≤</div>
          class StreakSystem { constructor() { this.currentStreak = 0;
          this.bestStreak = 0; this.lastPlayDate = null; this.streakHistory =
          []; this.milestones = [3, 7, 14, 30, 60, 100]; } // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–∏–∏
          –ø—Ä–∏ –≤—Ö–æ–¥–µ –≤ –∏–≥—Ä—É updateStreak() { const today =
          this.getTodayDateString(); const yesterday =
          this.getYesterdayDateString(); if (this.lastPlayDate === today) { //
          –£–∂–µ –∏–≥—Ä–∞–ª —Å–µ–≥–æ–¥–Ω—è, —Å–µ—Ä–∏—è –Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è return false; } if
          (this.lastPlayDate === yesterday) { // –ò–≥—Ä–∞–ª –≤—á–µ—Ä–∞, —Å–µ—Ä–∏—è –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è
          this.currentStreak++; this.lastPlayDate = today;
          this.streakHistory.push(today); // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–æ–≤—ã–π —Ä–µ–∫–æ—Ä–¥ if
          (this.currentStreak > this.bestStreak) { this.bestStreak =
          this.currentStreak; this.onNewRecord(); } // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ –≤–µ—Ö–∏
          if (this.milestones.includes(this.currentStreak)) {
          this.onMilestoneReached(this.currentStreak); } this.saveToStorage();
          return true; } else { // –ù–µ –∏–≥—Ä–∞–ª –≤—á–µ—Ä–∞, —Å–µ—Ä–∏—è —Å–ª–æ–º–∞–Ω–∞ if
          (this.currentStreak > 0) { this.onStreakBroken(); } this.currentStreak
          = 1; this.lastPlayDate = today; this.streakHistory = [today];
          this.saveToStorage(); return true; } } // –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞–≥—Ä–∞–¥ –∑–∞ –≤–µ—Ö–∏
          getStreakRewards(streakLength) { const rewards = { 3: { xp: 200,
          coins: 100, title: '–ü–µ—Ä–≤—ã–µ —à–∞–≥–∏' }, 7: { xp: 500, coins: 250, title:
          '–ù–µ–¥–µ–ª—å–Ω—ã–π –≤–æ–∏–Ω' }, 14: { xp: 1000, coins: 500, title: '–î–≤–µ –Ω–µ–¥–µ–ª–∏
          —Å–∏–ª—ã' }, 30: { xp: 2500, coins: 1000, title: '–ú–µ—Å—è—á–Ω—ã–π –º–∞—Å—Ç–µ—Ä' }, 60:
          { xp: 5000, coins: 2000, title: '–î–≤–∞ –º–µ—Å—è—Ü–∞ —É–ø–æ—Ä—Å—Ç–≤–∞' }, 100: { xp:
          10000, coins: 5000, title: '–õ–µ–≥–µ–Ω–¥–∞ –ø–æ—Å—Ç–æ—è–Ω—Å—Ç–≤–∞' } }; return
          rewards[streakLength] || null; } // –°–ª–µ–¥—É—é—â–∞—è –≤–µ—Ö–∞ getNextMilestone()
          { return this.milestones.find(milestone => milestone >
          this.currentStreak) || null; } // –î–Ω–µ–π –¥–æ —Å–ª–µ–¥—É—é—â–µ–π –≤–µ—Ö–∏
          getDaysToNextMilestone() { const next = this.getNextMilestone();
          return next ? next - this.currentStreak : null; } // –ö–∞–ª–µ–Ω–¥–∞—Ä—å
          –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ getActivityCalendar(days = 14) { const calendar = []; const
          today = new Date(); for (let i = days - 1; i >= 0; i--) { const date =
          new Date(today); date.setDate(date.getDate() - i); const dateString =
          this.formatDate(date); calendar.push({ date: dateString, day:
          date.getDate(), active: this.streakHistory.includes(dateString),
          isToday: i === 0 }); } return calendar; } // –°–æ–±—ã—Ç–∏—è
          onMilestoneReached(milestone) { const rewards =
          this.getStreakRewards(milestone); if (rewards) {
          this.showMilestoneNotification(milestone, rewards);
          this.giveRewards(rewards); } } onStreakBroken() {
          this.showStreakBrokenNotification(this.currentStreak); } onNewRecord()
          { this.showNewRecordNotification(this.bestStreak); } //
          –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ getTodayDateString() { return
          this.formatDate(new Date()); } getYesterdayDateString() { const
          yesterday = new Date(); yesterday.setDate(yesterday.getDate() - 1);
          return this.formatDate(yesterday); } formatDate(date) { return
          date.toISOString().split('T')[0]; } saveToStorage() { const data = {
          currentStreak: this.currentStreak, bestStreak: this.bestStreak,
          lastPlayDate: this.lastPlayDate, streakHistory: this.streakHistory };
          localStorage.setItem('streakSystem', JSON.stringify(data)); }
          loadFromStorage() { const saved =
          localStorage.getItem('streakSystem'); if (saved) { const data =
          JSON.parse(saved); this.currentStreak = data.currentStreak || 0;
          this.bestStreak = data.bestStreak || 0; this.lastPlayDate =
          data.lastPlayDate; this.streakHistory = data.streakHistory || []; } }
          }
        </div>

        <div class="practice">
          <h3>üéØ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ</h3>
          <p><strong>–°–æ–∑–¥–∞–π—Ç–µ –∫–æ–º–ø–ª–µ–∫—Å–Ω—É—é —Å–∏—Å—Ç–µ–º—É –º–æ—Ç–∏–≤–∞—Ü–∏–∏:</strong></p>
          <ol>
            <li>–î–æ–±–∞–≤—å—Ç–µ –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ –∏ –º–µ—Å—è—á–Ω—ã–µ —á–µ–ª–ª–µ–Ω–¥–∂–∏</li>
            <li>
              –°–æ–∑–¥–∞–π—Ç–µ —Å–∏—Å—Ç–µ–º—É "—Å—Ç—Ä–∞—Ö–æ–≤–∫–∏ —Å—Ç—Ä–∏–∫–∞" (–º–æ–∂–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å 1 –¥–µ–Ω—å)
            </li>
            <li>–†–µ–∞–ª–∏–∑—É–π—Ç–µ —Å–µ–∑–æ–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è —Å –æ—Å–æ–±—ã–º–∏ –Ω–∞–≥—Ä–∞–¥–∞–º–∏</li>
            <li>–î–æ–±–∞–≤—å—Ç–µ —Å–æ—Ü–∏–∞–ª—å–Ω—É—é —Å–æ—Å—Ç–∞–≤–ª—è—é—â—É—é (—Å—Ç—Ä–∏–∫–∏ –¥—Ä—É–∑–µ–π)</li>
          </ol>

          <div class="code">
            <div class="code-title">–ü–æ–¥—Å–∫–∞–∑–∫–∞: –°—Ç—Ä–∞—Ö–æ–≤–∫–∞ —Å—Ç—Ä–∏–∫–∞</div>
            class StreakInsurance { constructor() { this.shields = 0; //
            –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —â–∏—Ç–æ–≤ this.maxShields = 3; } // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —â–∏—Ç–∞ –ø—Ä–∏
            –ø—Ä–æ–ø—É—Å–∫–µ –¥–Ω—è useShield() { if (this.shields > 0) { this.shields--;
            return true; // –°—Ç—Ä–∏–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω } return false; // –ù–µ—Ç —â–∏—Ç–æ–≤, —Å—Ç—Ä–∏–∫
            —Å–ª–æ–º–∞–Ω } // –ü–æ–ª—É—á–µ–Ω–∏–µ —â–∏—Ç–∞ –∑–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è earnShield() { if
            (this.shields < this.maxShields) { this.shields++; return true; }
            return false; } // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –ø—Ä–æ–ø—É—Å–∫–µ
            autoUseShield(missedDays) { if (missedDays === 1 && this.shields >
            0) { this.useShield(); return { streakSaved: true, shieldsLeft:
            this.shields }; } return { streakSaved: false, shieldsLeft:
            this.shields }; } }
          </div>
        </div>
      </div>

      <div style="text-align: center; margin-top: 50px">
        <a href="guess-lesson-5c.html" class="next-lesson">
          –°–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–∫: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ ‚Üí
        </a>
      </div>
    </div>

    <script>
      // –°–∏—Å—Ç–µ–º–∞ —á–µ–ª–ª–µ–Ω–¥–∂–µ–π
      class DemoChallengeSystem {
        constructor() {
          this.challenges = [
            {
              id: 1,
              title: "–ú–∞—Å—Ç–µ—Ä —É–≥–∞–¥—ã–≤–∞–Ω–∏—è",
              description: "–í—ã–∏–≥—Ä–∞–π 3 –∏–≥—Ä—ã",
              icon: "üéØ",
              progress: 1,
              target: 3,
              reward: "+100 XP",
              completed: false,
            },
            {
              id: 2,
              title: "–°–∫–æ—Ä–æ—Å—Ç–Ω–æ–π –≥–µ–Ω–∏–π",
              description: "–í—ã–∏–≥—Ä–∞–π –∑–∞ 30 —Å–µ–∫—É–Ω–¥",
              icon: "‚ö°",
              progress: 0,
              target: 1,
              reward: "+150 XP",
              completed: false,
            },
            {
              id: 3,
              title: "–¢–æ—á–Ω–æ—Å—Ç—å",
              description: "–£–≥–∞–¥–∞–π —Å 3 –ø–æ–ø—ã—Ç–æ–∫",
              icon: "üé™",
              progress: 0,
              target: 1,
              reward: "+200 XP",
              completed: false,
            },
            {
              id: 4,
              title: "–ù–µ–¥–µ–ª—å–Ω—ã–π —á–µ–º–ø–∏–æ–Ω",
              description: "–ò–≥—Ä–∞–π 7 –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥",
              icon: "üî•",
              progress: 4,
              target: 7,
              reward: "+1000 XP",
              completed: false,
            },
          ];

          this.dailyTasks = [
            {
              id: 1,
              title: "–ü–µ—Ä–≤–∞—è –ø–æ–±–µ–¥–∞",
              description: "–í—ã–∏–≥—Ä–∞–π 1 –∏–≥—Ä—É",
              icon: "üéØ",
              progress: 0,
              target: 1,
              reward: { xp: 50 },
              completed: false,
              type: "wins",
            },
            {
              id: 2,
              title: "–ë—ã—Å—Ç—Ä–∞—è –∏–≥—Ä–∞",
              description: "–í—ã–∏–≥—Ä–∞–π –∑–∞ 45 —Å–µ–∫—É–Ω–¥",
              icon: "‚ö°",
              progress: 0,
              target: 45,
              reward: { xp: 75 },
              completed: false,
              type: "time",
            },
            {
              id: 3,
              title: "–¢—Ä–æ–π–∫–∞ –∏–≥—Ä",
              description: "–°—ã–≥—Ä–∞–π 3 –∏–≥—Ä—ã",
              icon: "üéÆ",
              progress: 1,
              target: 3,
              reward: { xp: 100 },
              completed: false,
              type: "games",
            },
          ];

          this.streakSystem = {
            currentStreak: 7,
            bestStreak: 12,
            calendar: this.generateCalendar(),
          };
        }

        renderChallenges() {
          const container = document.getElementById("challenge-grid");
          container.innerHTML = "";

          this.challenges.forEach((challenge) => {
            const challengeElement = document.createElement("div");
            challengeElement.className = `challenge-card ${
              challenge.completed ? "completed" : ""
            }`;

            const progress = Math.min(
              (challenge.progress / challenge.target) * 100,
              100
            );

            challengeElement.innerHTML = `
                        <div class="challenge-icon">${challenge.icon}</div>
                        <div class="challenge-title">${challenge.title}</div>
                        <div class="challenge-description">${challenge.description}</div>
                        <div class="challenge-progress">
                            <div class="challenge-progress-fill" style="width: ${progress}%"></div>
                        </div>
                        <div class="challenge-progress-text">${challenge.progress} / ${challenge.target}</div>
                        <div class="challenge-reward">${challenge.reward}</div>
                    `;

            container.appendChild(challengeElement);
          });
        }

        renderDailyTasks() {
          const container = document.getElementById("daily-tasks");
          container.innerHTML = "";

          this.dailyTasks.forEach((task) => {
            const taskElement = document.createElement("div");
            taskElement.className = `daily-task ${
              task.completed ? "completed" : ""
            }`;

            const progressText =
              task.type === "time" || task.type === "attempts"
                ? task.progress > 0
                  ? "–í—ã–ø–æ–ª–Ω–µ–Ω–æ!"
                  : `0/${task.target}`
                : `${task.progress}/${task.target}`;

            taskElement.innerHTML = `
                        <div class="task-info">
                            <div class="task-title">${task.icon} ${task.title}</div>
                            <div class="task-progress">
                                ${task.description}<br>
                                –ü—Ä–æ–≥—Ä–µ—Å—Å: ${progressText}
                            </div>
                        </div>
                        <div class="task-reward">+${task.reward.xp} XP</div>
                    `;

            container.appendChild(taskElement);
          });
        }

        generateCalendar() {
          const calendar = [];
          for (let i = 13; i >= 0; i--) {
            const active = i < 7; // –ü–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π –∞–∫—Ç–∏–≤–Ω—ã
            calendar.push({
              day: 14 - i,
              active: active,
              isToday: i === 0,
            });
          }
          return calendar;
        }

        renderStreakCalendar() {
          const container = document.getElementById("streak-calendar");
          container.innerHTML = "";

          this.streakSystem.calendar.forEach((day) => {
            const dayElement = document.createElement("div");
            dayElement.className = `calendar-day ${
              day.active ? "completed" : ""
            } ${day.isToday ? "today" : ""}`;
            dayElement.textContent = day.day;
            container.appendChild(dayElement);
          });

          document.getElementById("streak-number").textContent =
            this.streakSystem.currentStreak;

          const nextMilestone = [10, 14, 21, 30].find(
            (m) => m > this.streakSystem.currentStreak
          );
          if (nextMilestone) {
            document.getElementById("next-milestone").textContent =
              nextMilestone - this.streakSystem.currentStreak;
          }
        }

        completeRandomChallenge() {
          const incompleteChallenges = this.challenges.filter(
            (c) => !c.completed
          );
          if (incompleteChallenges.length > 0) {
            const randomChallenge =
              incompleteChallenges[
                Math.floor(Math.random() * incompleteChallenges.length)
              ];
            randomChallenge.progress = randomChallenge.target;
            randomChallenge.completed = true;
            this.renderChallenges();
          }
        }

        addProgressToAll() {
          this.challenges.forEach((challenge) => {
            if (!challenge.completed && challenge.progress < challenge.target) {
              challenge.progress = Math.min(
                challenge.progress + 1,
                challenge.target
              );
              if (challenge.progress >= challenge.target) {
                challenge.completed = true;
              }
            }
          });

          this.dailyTasks.forEach((task) => {
            if (!task.completed && task.progress < task.target) {
              task.progress = Math.min(task.progress + 1, task.target);
              if (task.progress >= task.target) {
                task.completed = true;
              }
            }
          });

          this.renderChallenges();
          this.renderDailyTasks();
        }

        resetChallenges() {
          this.challenges.forEach((challenge) => {
            challenge.progress = 0;
            challenge.completed = false;
          });

          this.dailyTasks.forEach((task) => {
            task.progress = 0;
            task.completed = false;
          });

          this.renderChallenges();
          this.renderDailyTasks();
        }

        addStreakDay() {
          this.streakSystem.currentStreak++;

          // –û–±–Ω–æ–≤–ª—è–µ–º –∫–∞–ª–µ–Ω–¥–∞—Ä—å
          this.streakSystem.calendar.forEach((day, index) => {
            if (
              index >=
              this.streakSystem.calendar.length -
                this.streakSystem.currentStreak
            ) {
              day.active = true;
            }
          });

          this.renderStreakCalendar();
        }

        addStreakWeek() {
          this.streakSystem.currentStreak += 7;

          // –û–±–Ω–æ–≤–ª—è–µ–º –∫–∞–ª–µ–Ω–¥–∞—Ä—å - –≤—Å–µ –¥–Ω–∏ –∞–∫—Ç–∏–≤–Ω—ã
          this.streakSystem.calendar.forEach((day) => {
            day.active = true;
          });

          this.renderStreakCalendar();
        }

        breakStreak() {
          this.streakSystem.currentStreak = 0;

          // –û–±–Ω—É–ª—è–µ–º –∫–∞–ª–µ–Ω–¥–∞—Ä—å
          this.streakSystem.calendar.forEach((day) => {
            day.active = false;
          });

          this.renderStreakCalendar();
        }
      }

      // –¢–∞–π–º–µ—Ä –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –∑–∞–¥–∞—á
      function updateDailyTimer() {
        const now = new Date();
        const tomorrow = new Date(now);
        tomorrow.setDate(tomorrow.getDate() + 1);
        tomorrow.setHours(0, 0, 0, 0);

        const timeLeft = tomorrow.getTime() - now.getTime();

        const hours = Math.floor(timeLeft / (1000 * 60 * 60));
        const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);

        document.getElementById("daily-timer").textContent = `${hours
          .toString()
          .padStart(2, "0")}:${minutes.toString().padStart(2, "0")}:${seconds
          .toString()
          .padStart(2, "0")}`;
      }

      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
      const challengeSystem = new DemoChallengeSystem();

      // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
      function completeRandomChallenge() {
        challengeSystem.completeRandomChallenge();
      }

      function addProgressToAll() {
        challengeSystem.addProgressToAll();
      }

      function resetChallenges() {
        challengeSystem.resetChallenges();
      }

      function addStreakDay() {
        challengeSystem.addStreakDay();
      }

      function addStreakWeek() {
        challengeSystem.addStreakWeek();
      }

      function breakStreak() {
        challengeSystem.breakStreak();
      }

      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
      challengeSystem.renderChallenges();
      challengeSystem.renderDailyTasks();
      challengeSystem.renderStreakCalendar();

      // –ó–∞–ø—É—Å–∫ —Ç–∞–π–º–µ—Ä–∞
      updateDailyTimer();
      setInterval(updateDailyTimer, 1000);
    </script>
  </body>
</html>
