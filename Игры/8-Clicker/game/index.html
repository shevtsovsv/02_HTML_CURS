<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–ò–º–ø–µ—Ä–∏—è –ü–µ—á–µ–Ω–µ–∫ - –ú–∞–≥–∏—á–µ—Å–∫–∏–π –∫–ª–∏–∫–µ—Ä!</title>
    <style>
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(
          135deg,
          #667eea 0%,
          #764ba2 50%,
          #f093fb 100%
        );
        margin: 0;
        padding: 10px;
        min-height: 100vh;
        color: #333;
        overflow-x: hidden;
      }

      .back-to-games {
        position: fixed;
        top: 20px;
        left: 20px;
        background: #4caf50;
        color: white;
        padding: 12px 20px;
        border-radius: 25px;
        text-decoration: none;
        font-weight: 600;
        font-size: 0.95rem;
        box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
        transition: all 0.3s ease;
        z-index: 1000;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .back-to-games:hover {
        background: #45a049;
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
      }

      .game-container {
        display: grid;
        grid-template-columns: 1fr 350px;
        gap: 20px;
        max-width: 1400px;
        margin: 0 auto;
      }

      .main-area {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 25px;
        padding: 20px;
        border: 3px solid rgba(102, 126, 234, 0.8);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        backdrop-filter: blur(10px);
      }

      .shop-area {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 25px;
        padding: 20px;
        border: 3px solid rgba(240, 147, 251, 0.8);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        backdrop-filter: blur(10px);
        max-height: 90vh;
        overflow-y: auto;
      }

      h1 {
        text-align: center;
        font-size: 2rem;
        margin-bottom: 10px;
        color: #5a67d8;
        text-shadow: 0 2px 4px rgba(90, 103, 216, 0.3);
      }

      .subtitle {
        text-align: center;
        font-size: 1rem;
        margin-bottom: 20px;
        color: #555;
      }

      .stats-panel {
        background: linear-gradient(135deg, #4facfe, #00f2fe);
        border-radius: 20px;
        padding: 20px;
        margin-bottom: 20px;
        color: white;
        text-align: center;
      }

      .cookies-count {
        font-size: 3rem;
        font-weight: bold;
        margin: 10px 0;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
      }

      .cookies-per-second {
        font-size: 1.2rem;
        opacity: 0.9;
        margin: 5px 0;
      }

      .click-area {
        text-align: center;
        margin: 30px 0;
      }

      .main-cookie {
        font-size: 12rem;
        cursor: pointer;
        transition: all 0.1s ease;
        display: inline-block;
        filter: drop-shadow(0 10px 20px rgba(0, 0, 0, 0.3));
        user-select: none;
      }

      .main-cookie:hover {
        transform: scale(1.05);
      }

      .main-cookie:active {
        transform: scale(0.95);
      }

      .click-power {
        background: linear-gradient(135deg, #fd79a8, #fdcb6e);
        color: white;
        padding: 10px 20px;
        border-radius: 20px;
        margin: 15px 0;
        font-weight: bold;
        font-size: 1.1rem;
        border: 2px solid #fd79a8;
      }

      .floating-number {
        position: absolute;
        font-size: 2rem;
        font-weight: bold;
        color: #fd79a8;
        animation: float-up 1.5s ease-out forwards;
        pointer-events: none;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
        z-index: 1000;
      }

      @keyframes float-up {
        0% {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
        100% {
          opacity: 0;
          transform: translateY(-100px) scale(1.5);
        }
      }

      .multiplier-section {
        background: rgba(255, 255, 255, 0.9);
        border-radius: 15px;
        padding: 15px;
        margin: 20px 0;
        border: 2px solid #a29bfe;
      }

      .multiplier-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 10px;
        margin: 10px 0;
      }

      .multiplier-btn {
        background: linear-gradient(135deg, #a29bfe, #6c5ce7);
        color: white;
        border: none;
        padding: 10px;
        border-radius: 10px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: bold;
        font-size: 0.9rem;
      }

      .multiplier-btn:hover {
        transform: scale(1.05);
      }

      .multiplier-btn:disabled {
        background: linear-gradient(135deg, #bdc3c7, #95a5a6);
        cursor: not-allowed;
        transform: none;
      }

      .shop-header {
        background: linear-gradient(135deg, #fd79a8, #fdcb6e);
        color: white;
        padding: 15px;
        border-radius: 15px;
        margin-bottom: 15px;
        text-align: center;
        font-weight: bold;
        font-size: 1.2rem;
      }

      .shop-item {
        background: rgba(255, 255, 255, 0.9);
        border-radius: 15px;
        padding: 15px;
        margin: 10px 0;
        border: 2px solid #ddd;
        transition: all 0.3s ease;
        cursor: pointer;
      }

      .shop-item:hover {
        transform: scale(1.02);
        border-color: #74b9ff;
        box-shadow: 0 5px 15px rgba(116, 185, 255, 0.3);
      }

      .shop-item.affordable {
        border-color: #00b894;
        box-shadow: 0 2px 10px rgba(0, 184, 148, 0.2);
      }

      .shop-item.expensive {
        opacity: 0.6;
        cursor: not-allowed;
      }

      .item-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
      }

      .item-name {
        font-weight: bold;
        font-size: 1.1rem;
        color: #2d3436;
      }

      .item-emoji {
        font-size: 2rem;
      }

      .item-count {
        background: #74b9ff;
        color: white;
        padding: 3px 8px;
        border-radius: 10px;
        font-size: 0.8rem;
        font-weight: bold;
      }

      .item-description {
        color: #636e72;
        font-size: 0.9rem;
        margin: 5px 0;
      }

      .item-stats {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
        margin: 10px 0;
      }

      .item-price {
        background: #e74c3c;
        color: white;
        padding: 8px 12px;
        border-radius: 10px;
        font-weight: bold;
        text-align: center;
      }

      .item-production {
        background: #27ae60;
        color: white;
        padding: 8px 12px;
        border-radius: 10px;
        font-weight: bold;
        text-align: center;
      }

      .achievements-section {
        background: rgba(255, 255, 255, 0.9);
        border-radius: 15px;
        padding: 15px;
        margin: 20px 0;
        border: 2px solid #f39c12;
      }

      .achievement {
        background: linear-gradient(135deg, #f39c12, #e67e22);
        color: white;
        padding: 8px 15px;
        border-radius: 15px;
        margin: 5px;
        display: inline-block;
        font-size: 0.85rem;
        font-weight: bold;
      }

      .achievement.locked {
        background: linear-gradient(135deg, #bdc3c7, #95a5a6);
        opacity: 0.6;
      }

      .prestige-section {
        background: linear-gradient(135deg, #667eea, #764ba2);
        border-radius: 15px;
        padding: 15px;
        margin: 20px 0;
        color: white;
        text-align: center;
      }

      .prestige-btn {
        background: linear-gradient(135deg, #fd79a8, #fdcb6e);
        color: white;
        border: none;
        padding: 15px 25px;
        border-radius: 20px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: bold;
        font-size: 1.1rem;
        margin: 10px;
      }

      .prestige-btn:hover {
        transform: scale(1.05);
      }

      .prestige-btn:disabled {
        background: linear-gradient(135deg, #bdc3c7, #95a5a6);
        cursor: not-allowed;
        transform: none;
      }

      .special-effects {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 999;
      }

      .golden-cookie {
        position: fixed;
        font-size: 4rem;
        cursor: pointer;
        animation: golden-float 10s linear infinite;
        pointer-events: all;
        z-index: 1000;
        filter: drop-shadow(0 5px 15px rgba(255, 215, 0, 0.8));
      }

      @keyframes golden-float {
        0% {
          transform: translateX(-100px) translateY(0px) rotate(0deg);
          opacity: 1;
        }
        50% {
          transform: translateX(calc(50vw - 50px)) translateY(-20px)
            rotate(180deg);
        }
        100% {
          transform: translateX(calc(100vw + 100px)) translateY(0px)
            rotate(360deg);
          opacity: 0;
        }
      }

      .milestone-popup {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: linear-gradient(135deg, #fd79a8, #fdcb6e);
        color: white;
        padding: 30px;
        border-radius: 20px;
        border: 4px solid #fff;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        z-index: 2000;
        text-align: center;
        display: none;
      }

      .controls-panel {
        background: rgba(255, 255, 255, 0.9);
        border-radius: 15px;
        padding: 15px;
        margin: 20px 0;
        border: 2px solid #74b9ff;
      }

      .control-btn {
        background: linear-gradient(135deg, #74b9ff, #0984e3);
        color: white;
        border: none;
        padding: 10px 15px;
        border-radius: 10px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: bold;
        margin: 5px;
        font-size: 0.9rem;
      }

      .control-btn:hover {
        transform: scale(1.05);
      }

      .upgrade-categories {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 5px;
        margin-bottom: 15px;
      }

      .category-btn {
        background: linear-gradient(135deg, #a8e6cf, #88d8a3);
        color: #2d3436;
        border: none;
        padding: 8px 12px;
        border-radius: 10px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: bold;
        font-size: 0.8rem;
      }

      .category-btn.active {
        background: linear-gradient(135deg, #fd79a8, #fdcb6e);
        color: white;
      }

      @media (max-width: 768px) {
        .game-container {
          grid-template-columns: 1fr;
          gap: 10px;
        }

        .main-cookie {
          font-size: 8rem;
        }

        .cookies-count {
          font-size: 2rem;
        }
      }
    </style>
  </head>
  <body>
    <a href="../../index.html" class="back-to-games">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –∏–≥—Ä–∞–º</a>
    <div class="special-effects" id="specialEffects"></div>

    <div class="game-container">
      <div class="main-area">
        <h1>üç™ –ò–º–ø–µ—Ä–∏—è –ü–µ—á–µ–Ω–µ–∫ üç™</h1>
        <p class="subtitle">–°–æ–∑–¥–∞–≤–∞–π –≤–µ–ª–∏—á–∞–π—à—É—é –∫–æ–Ω–¥–∏—Ç–µ—Ä—Å–∫—É—é –∏–º–ø–µ—Ä–∏—é!</p>

        <div class="stats-panel">
          <div class="cookies-count" id="cookiesCount">0</div>
          <div class="cookies-per-second">
            üìà <span id="cookiesPerSecond">0</span> –ø–µ—á–µ–Ω–µ–∫ –≤ —Å–µ–∫—É–Ω–¥—É
          </div>
          <div style="font-size: 0.9rem; margin-top: 10px">
            üèÜ –í—Å–µ–≥–æ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–æ: <span id="totalCookies">0</span>
          </div>
        </div>

        <div class="click-area">
          <div class="main-cookie" id="mainCookie" onclick="clickCookie()">
            üç™
          </div>
          <div class="click-power">
            üí™ –°–∏–ª–∞ –∫–ª–∏–∫–∞: <span id="clickPower">1</span> –ø–µ—á–µ–Ω–µ–∫
          </div>
        </div>

        <div class="multiplier-section">
          <h4 style="margin-top: 0; text-align: center; color: #6c5ce7">
            ‚ö° –í—Ä–µ–º–µ–Ω–Ω—ã–µ —É—Å–∏–ª–µ–Ω–∏—è
          </h4>
          <div class="multiplier-grid">
            <button
              class="multiplier-btn"
              onclick="buyMultiplier('click', 100)"
              id="clickMultBtn"
            >
              üñ±Ô∏è x2 –∫–ª–∏–∫ (100 üç™)
            </button>
            <button
              class="multiplier-btn"
              onclick="buyMultiplier('production', 500)"
              id="prodMultBtn"
            >
              üè≠ x2 –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ (500 üç™)
            </button>
            <button
              class="multiplier-btn"
              onclick="buyMultiplier('golden', 1000)"
              id="goldenMultBtn"
            >
              ‚ú® –ó–æ–ª–æ—Ç–∞—è –ø–µ—á–µ–Ω—å–∫–∞ (1000 üç™)
            </button>
          </div>
          <div
            style="
              font-size: 0.8rem;
              text-align: center;
              color: #636e72;
              margin-top: 10px;
            "
          >
            –ê–∫—Ç–∏–≤–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã: <span id="activeEffects">–ù–µ—Ç</span>
          </div>
        </div>

        <div class="achievements-section">
          <h4 style="margin-top: 0; color: #e67e22">
            üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è <span id="achievementCount">0/15</span>
          </h4>
          <div id="achievementsList">
            –ö–ª–∏–∫–∞–π –∏ –ø–æ–∫—É–ø–∞–π —É–ª—É—á—à–µ–Ω–∏—è, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è!
          </div>
        </div>

        <div class="prestige-section">
          <h4 style="margin-top: 0">üëë –ü—Ä–µ—Å—Ç–∏–∂</h4>
          <p style="font-size: 0.9rem; margin: 10px 0">
            –ü—Ä–µ—Å—Ç–∏–∂ –æ—á–∫–æ–≤: <strong><span id="prestigePoints">0</span></strong
            ><br />
            –ë–æ–Ω—É—Å –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞:
            <strong>+<span id="prestigeBonus">0</span>%</strong>
          </p>
          <button
            class="prestige-btn"
            onclick="doPrestige()"
            id="prestigeBtn"
            disabled
          >
            üåü –ü—Ä–µ—Å—Ç–∏–∂ (—Ç—Ä–µ–±—É–µ—Ç—Å—è 1,000,000 –ø–µ—á–µ–Ω–µ–∫)
          </button>
        </div>

        <div class="controls-panel">
          <button class="control-btn" onclick="saveGame()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
          <button class="control-btn" onclick="loadGame()">üìÅ –ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
          <button class="control-btn" onclick="resetGame()">üîÑ –°–±—Ä–æ—Å</button>
          <button class="control-btn" onclick="showStats()">
            üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
          </button>
        </div>
      </div>

      <div class="shop-area">
        <div class="shop-header">üõí –ú–∞–≥–∞–∑–∏–Ω —É–ª—É—á—à–µ–Ω–∏–π</div>

        <div class="upgrade-categories">
          <button
            class="category-btn active"
            onclick="showCategory('buildings')"
            id="buildingsTab"
          >
            üè≠ –ó–¥–∞–Ω–∏—è
          </button>
          <button
            class="category-btn"
            onclick="showCategory('upgrades')"
            id="upgradesTab"
          >
            ‚¨ÜÔ∏è –£–ª—É—á—à–µ–Ω–∏—è
          </button>
        </div>

        <div id="buildingsCategory">
          <!-- –ó–¥–∞–Ω–∏—è –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
        </div>

        <div id="upgradesCategory" style="display: none">
          <!-- –£–ª—É—á—à–µ–Ω–∏—è –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
        </div>
      </div>
    </div>

    <div class="milestone-popup" id="milestonePopup">
      <h2 id="milestoneTitle">üéâ –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ!</h2>
      <p id="milestoneText"></p>
      <button class="prestige-btn" onclick="closeMilestone()">–°—É–ø–µ—Ä! üåü</button>
    </div>

    <script>
      // –ò–≥—Ä–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
      let gameState = {
        cookies: 0,
        totalCookies: 0,
        cookiesPerSecond: 0,
        clickPower: 1,
        buildings: {},
        upgrades: [],
        achievements: [],
        prestigePoints: 0,
        prestigeLevel: 0,
        multipliers: {
          click: 1,
          production: 1,
          duration: 0,
        },
        goldenCookies: 0,
        totalClicks: 0,
        gameStartTime: Date.now(),
      };

      // –ó–¥–∞–Ω–∏—è
      const buildings = [
        {
          id: "cursor",
          name: "–ö—É—Ä—Å–æ—Ä",
          emoji: "üëÜ",
          description: "–ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä –¥–ª—è –ø–µ—á–µ–Ω–µ–∫",
          basePrice: 15,
          baseProduction: 0.1,
          count: 0,
        },
        {
          id: "grandma",
          name: "–ë–∞–±—É—à–∫–∞",
          emoji: "üëµ",
          description: "–ü–µ—á—ë—Ç –ø–µ—á–µ–Ω—å–∫–∏ –ø–æ —Å—Ç–∞—Ä–∏–Ω–∫–µ",
          basePrice: 100,
          baseProduction: 1,
          count: 0,
        },
        {
          id: "farm",
          name: "–§–µ—Ä–º–∞",
          emoji: "üöú",
          description: "–í—ã—Ä–∞—â–∏–≤–∞–µ—Ç –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã",
          basePrice: 1100,
          baseProduction: 8,
          count: 0,
        },
        {
          id: "mine",
          name: "–®–∞—Ö—Ç–∞",
          emoji: "‚õèÔ∏è",
          description: "–î–æ–±—ã–≤–∞–µ—Ç —Å–∞—Ö–∞—Ä –∏ —Å–æ–ª—å",
          basePrice: 12000,
          baseProduction: 47,
          count: 0,
        },
        {
          id: "factory",
          name: "–§–∞–±—Ä–∏–∫–∞",
          emoji: "üè≠",
          description: "–ú–∞—Å—Å–æ–≤–æ–µ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ",
          basePrice: 130000,
          baseProduction: 260,
          count: 0,
        },
        {
          id: "bank",
          name: "–ë–∞–Ω–∫",
          emoji: "üè¶",
          description: "–ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ –≤ –ø–µ—á–µ–Ω—å–∫–∏",
          basePrice: 1400000,
          baseProduction: 1400,
          count: 0,
        },
        {
          id: "temple",
          name: "–•—Ä–∞–º",
          emoji: "üèõÔ∏è",
          description: "–î—É—Ö–æ–≤–Ω—ã–µ –ø–µ—á–µ–Ω—å–∫–∏",
          basePrice: 20000000,
          baseProduction: 7800,
          count: 0,
        },
        {
          id: "wizardTower",
          name: "–ë–∞—à–Ω—è –ú–∞–≥–∞",
          emoji: "üè∞",
          description: "–ú–∞–≥–∏—á–µ—Å–∫–∏–µ –ø–µ—á–µ–Ω—å–∫–∏",
          basePrice: 330000000,
          baseProduction: 44000,
          count: 0,
        },
      ];

      // –£–ª—É—á—à–µ–Ω–∏—è
      const upgrades = [
        {
          id: "reinforcedCursor",
          name: "–£—Å–∏–ª–µ–Ω–Ω—ã–π –∫—É—Ä—Å–æ—Ä",
          emoji: "üí™",
          description: "–ö—É—Ä—Å–æ—Ä—ã –≤ 2 —Ä–∞–∑–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ",
          price: 100,
          requirement: () => gameState.buildings.cursor >= 1,
          effect: () =>
            (buildings.find((b) => b.id === "cursor").baseProduction *= 2),
        },
        {
          id: "grandmaRecipe",
          name: "–°–µ–∫—Ä–µ—Ç–Ω—ã–π —Ä–µ—Ü–µ–ø—Ç",
          emoji: "üìú",
          description: "–ë–∞–±—É—à–∫–∏ –≤ 2 —Ä–∞–∑–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ",
          price: 1000,
          requirement: () => gameState.buildings.grandma >= 1,
          effect: () =>
            (buildings.find((b) => b.id === "grandma").baseProduction *= 2),
        },
        {
          id: "megaClick",
          name: "–ú–µ–≥–∞ –∫–ª–∏–∫",
          emoji: "üëä",
          description: "–°–∏–ª–∞ –∫–ª–∏–∫–∞ —É–≤–µ–ª–∏—á–µ–Ω–∞ –≤ 2 —Ä–∞–∑–∞",
          price: 500,
          requirement: () => gameState.totalClicks >= 100,
          effect: () => (gameState.clickPower *= 2),
        },
        {
          id: "goldenTouch",
          name: "–ó–æ–ª–æ—Ç–æ–µ –∫–∞—Å–∞–Ω–∏–µ",
          emoji: "‚ú®",
          description: "+5% –∫ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤—É –∑–∞ –∫–∞–∂–¥—É—é –∑–æ–ª–æ—Ç—É—é –ø–µ—á–µ–Ω—å–∫—É",
          price: 10000,
          requirement: () => gameState.goldenCookies >= 5,
          effect: () => {},
        },
      ];

      // –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è
      const achievements = [
        {
          id: "firstClick",
          name: "üñ±Ô∏è –ü–µ—Ä–≤—ã–π –∫–ª–∏–∫",
          description: "–ö–ª–∏–∫–Ω–∏ –ø–µ—Ä–≤—É—é –ø–µ—á–µ–Ω—å–∫—É",
          condition: () => gameState.totalClicks >= 1,
        },
        {
          id: "baker",
          name: "üë®‚Äçüç≥ –ù–∞—á–∏–Ω–∞—é—â–∏–π –ø–µ–∫–∞—Ä—å",
          description: "–ü—Ä–æ–∏–∑–≤–µ–¥–∏ 100 –ø–µ—á–µ–Ω–µ–∫",
          condition: () => gameState.totalCookies >= 100,
        },
        {
          id: "entrepreneur",
          name: "üíº –ü—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—å",
          description: "–ö—É–ø–∏ –ø–µ—Ä–≤–æ–µ –∑–¥–∞–Ω–∏–µ",
          condition: () =>
            Object.values(gameState.buildings).some((count) => count > 0),
        },
        {
          id: "millionaire",
          name: "üí∞ –ú–∏–ª–ª–∏–æ–Ω–µ—Ä",
          description: "1,000,000 –ø–µ—á–µ–Ω–µ–∫ –∑–∞ –≤—Å—ë –≤—Ä–µ–º—è",
          condition: () => gameState.totalCookies >= 1000000,
        },
        {
          id: "clickMaster",
          name: "üèÖ –ú–∞—Å—Ç–µ—Ä –∫–ª–∏–∫–æ–≤",
          description: "1,000 –∫–ª–∏–∫–æ–≤",
          condition: () => gameState.totalClicks >= 1000,
        },
        {
          id: "speedRunner",
          name: "‚ö° –°–ø–∏–¥—Ä–∞–Ω–Ω–µ—Ä",
          description: "1,000 –ø–µ—á–µ–Ω–µ–∫ –∑–∞ –ø–µ—Ä–≤—ã–µ 5 –º–∏–Ω—É—Ç",
          condition: () =>
            gameState.totalCookies >= 1000 &&
            Date.now() - gameState.gameStartTime < 300000,
        },
      ];

      let gameInterval;
      let currentCategory = "buildings";

      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–¥–∞–Ω–∏–π –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –∏–≥—Ä—ã
      buildings.forEach((building) => {
        gameState.buildings[building.id] = 0;
      });

      // –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∏–∫ –ø–æ –ø–µ—á–µ–Ω—å–∫–µ
      function clickCookie() {
        const clickValue = gameState.clickPower * gameState.multipliers.click;
        gameState.cookies += clickValue;
        gameState.totalCookies += clickValue;
        gameState.totalClicks++;

        createFloatingNumber(clickValue);
        animateMainCookie();
        updateDisplay();
        checkAchievements();
      }

      // –ê–Ω–∏–º–∞—Ü–∏—è –ø–µ—á–µ–Ω—å–∫–∏
      function animateMainCookie() {
        const cookie = document.getElementById("mainCookie");
        cookie.style.transform = "scale(0.95)";
        setTimeout(() => {
          cookie.style.transform = "scale(1)";
        }, 100);
      }

      // –õ–µ—Ç—è—â–∏–µ —Ü–∏—Ñ—Ä—ã
      function createFloatingNumber(value) {
        const number = document.createElement("div");
        number.className = "floating-number";
        number.textContent = "+" + formatNumber(value);

        const cookieRect = document
          .getElementById("mainCookie")
          .getBoundingClientRect();
        number.style.left = cookieRect.left + cookieRect.width / 2 + "px";
        number.style.top = cookieRect.top + cookieRect.height / 2 + "px";

        document.body.appendChild(number);

        setTimeout(() => number.remove(), 1500);
      }

      // –ü–æ–∫—É–ø–∫–∞ –∑–¥–∞–Ω–∏—è
      function buyBuilding(buildingId) {
        const building = buildings.find((b) => b.id === buildingId);
        const price = getPrice(
          building.basePrice,
          gameState.buildings[buildingId]
        );

        if (gameState.cookies >= price) {
          gameState.cookies -= price;
          gameState.buildings[buildingId]++;
          updateProduction();
          updateDisplay();
          updateShop();
          checkAchievements();

          // –≠—Ñ—Ñ–µ–∫—Ç –ø–æ–∫—É–ø–∫–∏
          createPurchaseEffect(building.emoji);
        }
      }

      // –†–∞—Å—á—ë—Ç —Ü–µ–Ω—ã
      function getPrice(basePrice, count) {
        return Math.floor(basePrice * Math.pow(1.15, count));
      }

      // –ü–æ–∫—É–ø–∫–∞ —É–ª—É—á—à–µ–Ω–∏—è
      function buyUpgrade(upgradeId) {
        const upgrade = upgrades.find((u) => u.id === upgradeId);

        if (
          gameState.cookies >= upgrade.price &&
          !gameState.upgrades.includes(upgradeId)
        ) {
          gameState.cookies -= upgrade.price;
          gameState.upgrades.push(upgradeId);
          upgrade.effect();
          updateProduction();
          updateDisplay();
          updateShop();

          showMilestone(
            `üéâ –£–ª—É—á—à–µ–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–æ!`,
            `${upgrade.emoji} ${upgrade.name}`
          );
        }
      }

      // –ü–æ–∫—É–ø–∫–∞ –º—É–ª—å—Ç–∏–ø–ª–∏–∫–∞—Ç–æ—Ä–∞
      function buyMultiplier(type, price) {
        if (gameState.cookies >= price) {
          gameState.cookies -= price;

          switch (type) {
            case "click":
              gameState.multipliers.click = 2;
              gameState.multipliers.duration = 30;
              break;
            case "production":
              gameState.multipliers.production = 2;
              gameState.multipliers.duration = 30;
              break;
            case "golden":
              spawnGoldenCookie();
              break;
          }

          updateDisplay();
        }
      }

      // –ó–æ–ª–æ—Ç–∞—è –ø–µ—á–µ–Ω—å–∫–∞
      function spawnGoldenCookie() {
        const golden = document.createElement("div");
        golden.className = "golden-cookie";
        golden.innerHTML = "ü•á";
        golden.style.top = Math.random() * (window.innerHeight - 100) + "px";
        golden.onclick = () => clickGoldenCookie(golden);

        document.getElementById("specialEffects").appendChild(golden);

        setTimeout(() => {
          if (golden.parentNode) golden.remove();
        }, 10000);
      }

      function clickGoldenCookie(element) {
        const bonus = gameState.cookiesPerSecond * 77 + 1000;
        gameState.cookies += bonus;
        gameState.totalCookies += bonus;
        gameState.goldenCookies++;

        createFloatingNumber(bonus);
        element.remove();
        updateDisplay();
      }

      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞
      function updateProduction() {
        let total = 0;

        buildings.forEach((building) => {
          const count = gameState.buildings[building.id];
          total += building.baseProduction * count;
        });

        // –ë–æ–Ω—É—Å—ã –æ—Ç —É–ª—É—á—à–µ–Ω–∏–π
        if (gameState.upgrades.includes("goldenTouch")) {
          total *= 1 + gameState.goldenCookies * 0.05;
        }

        // –ü—Ä–µ—Å—Ç–∏–∂ –±–æ–Ω—É—Å
        total *= 1 + gameState.prestigeLevel * 0.1;

        // –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º—É–ª—å—Ç–∏–ø–ª–∏–∫–∞—Ç–æ—Ä—ã
        total *= gameState.multipliers.production;

        gameState.cookiesPerSecond = total;
      }

      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
      function updateDisplay() {
        document.getElementById("cookiesCount").textContent = formatNumber(
          Math.floor(gameState.cookies)
        );
        document.getElementById("cookiesPerSecond").textContent = formatNumber(
          gameState.cookiesPerSecond,
          1
        );
        document.getElementById("totalCookies").textContent = formatNumber(
          gameState.totalCookies
        );
        document.getElementById("clickPower").textContent = formatNumber(
          gameState.clickPower * gameState.multipliers.click
        );
        document.getElementById("prestigePoints").textContent =
          gameState.prestigeLevel;
        document.getElementById("prestigeBonus").textContent =
          gameState.prestigeLevel * 10;

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –º—É–ª—å—Ç–∏–ø–ª–∏–∫–∞—Ç–æ—Ä–æ–≤
        updateMultiplierButtons();
        updateActiveEffects();
        updatePrestigeButton();
      }

      // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∏—Å–µ–ª
      function formatNumber(num, decimals = 0) {
        if (num < 1000) return num.toFixed(decimals);
        if (num < 1000000) return (num / 1000).toFixed(1) + "K";
        if (num < 1000000000) return (num / 1000000).toFixed(1) + "M";
        if (num < 1000000000000) return (num / 1000000000).toFixed(1) + "B";
        return (num / 1000000000000).toFixed(1) + "T";
      }

      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–∞
      function updateShop() {
        if (currentCategory === "buildings") {
          updateBuildingsShop();
        } else {
          updateUpgradesShop();
        }
      }

      function updateBuildingsShop() {
        const container = document.getElementById("buildingsCategory");
        container.innerHTML = "";

        buildings.forEach((building) => {
          const count = gameState.buildings[building.id];
          const price = getPrice(building.basePrice, count);
          const affordable = gameState.cookies >= price;

          const item = document.createElement("div");
          item.className = `shop-item ${
            affordable ? "affordable" : "expensive"
          }`;
          item.onclick = affordable ? () => buyBuilding(building.id) : null;

          item.innerHTML = `
                    <div class="item-header">
                        <div>
                            <div class="item-name">${building.name}</div>
                            <div class="item-count">–ö—É–ø–ª–µ–Ω–æ: ${count}</div>
                        </div>
                        <div class="item-emoji">${building.emoji}</div>
                    </div>
                    <div class="item-description">${building.description}</div>
                    <div class="item-stats">
                        <div class="item-price">üí∞ ${formatNumber(price)}</div>
                        <div class="item-production">üìà ${formatNumber(
                          building.baseProduction,
                          1
                        )}/—Å–µ–∫</div>
                    </div>
                `;

          container.appendChild(item);
        });
      }

      function updateUpgradesShop() {
        const container = document.getElementById("upgradesCategory");
        container.innerHTML = "";

        upgrades.forEach((upgrade) => {
          if (gameState.upgrades.includes(upgrade.id)) return;
          if (!upgrade.requirement()) return;

          const affordable = gameState.cookies >= upgrade.price;

          const item = document.createElement("div");
          item.className = `shop-item ${
            affordable ? "affordable" : "expensive"
          }`;
          item.onclick = affordable ? () => buyUpgrade(upgrade.id) : null;

          item.innerHTML = `
                    <div class="item-header">
                        <div>
                            <div class="item-name">${upgrade.name}</div>
                        </div>
                        <div class="item-emoji">${upgrade.emoji}</div>
                    </div>
                    <div class="item-description">${upgrade.description}</div>
                    <div class="item-stats">
                        <div class="item-price" style="grid-column: 1/-1;">üí∞ ${formatNumber(
                          upgrade.price
                        )}</div>
                    </div>
                `;

          container.appendChild(item);
        });

        if (container.children.length === 0) {
          container.innerHTML =
            '<p style="text-align: center; color: #7f8c8d;">–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —É–ª—É—á—à–µ–Ω–∏–π</p>';
        }
      }

      // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
      function showCategory(category) {
        currentCategory = category;

        document
          .querySelectorAll(".category-btn")
          .forEach((btn) => btn.classList.remove("active"));
        document.getElementById(category + "Tab").classList.add("active");

        document.getElementById("buildingsCategory").style.display =
          category === "buildings" ? "block" : "none";
        document.getElementById("upgradesCategory").style.display =
          category === "upgrades" ? "block" : "none";

        updateShop();
      }

      // –ú—É–ª—å—Ç–∏–ø–ª–∏–∫–∞—Ç–æ—Ä—ã
      function updateMultiplierButtons() {
        document.getElementById("clickMultBtn").disabled =
          gameState.cookies < 100;
        document.getElementById("prodMultBtn").disabled =
          gameState.cookies < 500;
        document.getElementById("goldenMultBtn").disabled =
          gameState.cookies < 1000;
      }

      function updateActiveEffects() {
        const effects = [];
        if (gameState.multipliers.click > 1)
          effects.push(`–ö–ª–∏–∫ x${gameState.multipliers.click}`);
        if (gameState.multipliers.production > 1)
          effects.push(`–ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ x${gameState.multipliers.production}`);

        document.getElementById("activeEffects").textContent =
          effects.length > 0 ? effects.join(", ") : "–ù–µ—Ç";
      }

      // –ü—Ä–µ—Å—Ç–∏–∂
      function updatePrestigeButton() {
        const canPrestige = gameState.totalCookies >= 1000000;
        document.getElementById("prestigeBtn").disabled = !canPrestige;
      }

      function doPrestige() {
        if (gameState.totalCookies >= 1000000) {
          gameState.prestigeLevel++;
          gameState.cookies = 0;
          gameState.totalCookies = 0;
          gameState.buildings = {};
          buildings.forEach((building) => {
            gameState.buildings[building.id] = 0;
          });
          gameState.upgrades = [];

          updateProduction();
          updateDisplay();
          updateShop();

          showMilestone(
            "üëë –ü—Ä–µ—Å—Ç–∏–∂ –ø–æ–ª—É—á–µ–Ω!",
            `–£—Ä–æ–≤–µ–Ω—å –ø—Ä–µ—Å—Ç–∏–∂–∞: ${gameState.prestigeLevel}\n–ë–æ–Ω—É—Å: +${
              gameState.prestigeLevel * 10
            }% –∫ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤—É`
          );
        }
      }

      // –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è
      function checkAchievements() {
        achievements.forEach((achievement) => {
          if (
            !gameState.achievements.includes(achievement.id) &&
            achievement.condition()
          ) {
            gameState.achievements.push(achievement.id);
            showMilestone(
              "üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ!",
              `${achievement.name}\n${achievement.description}`
            );
            updateAchievementsDisplay();
          }
        });
      }

      function updateAchievementsDisplay() {
        const container = document.getElementById("achievementsList");
        document.getElementById(
          "achievementCount"
        ).textContent = `${gameState.achievements.length}/${achievements.length}`;

        if (gameState.achievements.length === 0) {
          container.innerHTML =
            "–ö–ª–∏–∫–∞–π –∏ –ø–æ–∫—É–ø–∞–π —É–ª—É—á—à–µ–Ω–∏—è, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è!";
          return;
        }

        container.innerHTML = achievements
          .map((achievement) => {
            const unlocked = gameState.achievements.includes(achievement.id);
            return `<div class="achievement ${
              unlocked ? "" : "locked"
            }" title="${achievement.description}">
                    ${achievement.name}
                </div>`;
          })
          .join("");
      }

      // –≠—Ñ—Ñ–µ–∫—Ç—ã
      function createPurchaseEffect(emoji) {
        const effect = document.createElement("div");
        effect.style.position = "fixed";
        effect.style.fontSize = "3rem";
        effect.style.left = Math.random() * window.innerWidth + "px";
        effect.style.top = window.innerHeight + "px";
        effect.style.pointerEvents = "none";
        effect.style.zIndex = "1000";
        effect.textContent = emoji;
        effect.style.animation = "float-up 2s ease-out forwards";

        document.body.appendChild(effect);
        setTimeout(() => effect.remove(), 2000);
      }

      // –ü–æ–ø–∞–ø—ã
      function showMilestone(title, text) {
        document.getElementById("milestoneTitle").textContent = title;
        document.getElementById("milestoneText").textContent = text;
        document.getElementById("milestonePopup").style.display = "block";
      }

      function closeMilestone() {
        document.getElementById("milestonePopup").style.display = "none";
      }

      // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/–∑–∞–≥—Ä—É–∑–∫–∞
      function saveGame() {
        localStorage.setItem("cookieClicker", JSON.stringify(gameState));
        alert("üíæ –ò–≥—Ä–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞!");
      }

      function loadGame() {
        const saved = localStorage.getItem("cookieClicker");
        if (saved) {
          gameState = { ...gameState, ...JSON.parse(saved) };
          updateProduction();
          updateDisplay();
          updateShop();
          updateAchievementsDisplay();
          alert("üìÅ –ò–≥—Ä–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞!");
        } else {
          alert("‚ùå –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–π –Ω–µ –Ω–∞–π–¥–µ–Ω–æ!");
        }
      }

      function resetGame() {
        if (confirm("üîÑ –°–±—Ä–æ—Å–∏—Ç—å –≤–µ—Å—å –ø—Ä–æ–≥—Ä–µ—Å—Å?")) {
          localStorage.removeItem("cookieClicker");
          location.reload();
        }
      }

      function showStats() {
        const playTime = Math.floor(
          (Date.now() - gameState.gameStartTime) / 1000
        );
        const minutes = Math.floor(playTime / 60);
        const seconds = playTime % 60;

        alert(`üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê:
            
üç™ –í—Å–µ–≥–æ –ø–µ—á–µ–Ω–µ–∫: ${formatNumber(gameState.totalCookies)}
üñ±Ô∏è –í—Å–µ–≥–æ –∫–ª–∏–∫–æ–≤: ${gameState.totalClicks}
‚è±Ô∏è –í—Ä–µ–º—è –∏–≥—Ä—ã: ${minutes}–º ${seconds}—Å
üìà –ü–µ—á–µ–Ω–µ–∫ –≤ —Å–µ–∫—É–Ω–¥—É: ${formatNumber(gameState.cookiesPerSecond)}
üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è: ${gameState.achievements.length}/${achievements.length}
üëë –£—Ä–æ–≤–µ–Ω—å –ø—Ä–µ—Å—Ç–∏–∂–∞: ${gameState.prestigeLevel}`);
      }

      // –û—Å–Ω–æ–≤–Ω–æ–π –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
      function startGameLoop() {
        gameInterval = setInterval(() => {
          // –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ –ø–µ—á–µ–Ω–µ–∫
          gameState.cookies += gameState.cookiesPerSecond / 10;
          gameState.totalCookies += gameState.cookiesPerSecond / 10;

          // –£–º–µ–Ω—å—à–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
          if (gameState.multipliers.duration > 0) {
            gameState.multipliers.duration -= 0.1;

            if (gameState.multipliers.duration <= 0) {
              gameState.multipliers.click = 1;
              gameState.multipliers.production = 1;
              gameState.multipliers.duration = 0;
            }
          }

          updateDisplay();

          // –°–ª—É—á–∞–π–Ω—ã–µ –∑–æ–ª–æ—Ç—ã–µ –ø–µ—á–µ–Ω—å–∫–∏
          if (Math.random() < 0.0005 && gameState.cookiesPerSecond > 0) {
            spawnGoldenCookie();
          }
        }, 100);
      }

      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
      document.addEventListener("DOMContentLoaded", function () {
        updateProduction();
        updateDisplay();
        updateShop();
        updateAchievementsDisplay();
        startGameLoop();
      });
    </script>
  </body>
</html>
