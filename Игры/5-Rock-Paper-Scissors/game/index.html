<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–ö–∞–º–µ–Ω—å-–ù–æ–∂–Ω–∏—Ü—ã-–ë—É–º–∞–≥–∞ - –¢—É—Ä–Ω–∏—Ä —á–µ–º–ø–∏–æ–Ω–æ–≤!</title>
    <style>
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(
          135deg,
          #667eea 0%,
          #764ba2 50%,
          #6b73ff 100%
        );
        margin: 0;
        padding: 10px;
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #333;
      }

      .back-to-games {
        position: fixed;
        top: 20px;
        left: 20px;
        background: #4caf50;
        color: white;
        padding: 12px 20px;
        border-radius: 25px;
        text-decoration: none;
        font-weight: 600;
        font-size: 0.95rem;
        box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
        transition: all 0.3s ease;
        z-index: 1000;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .back-to-games:hover {
        background: #45a049;
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
      }

      .game-container {
        text-align: center;
        background: rgba(255, 255, 255, 0.95);
        border-radius: 25px;
        padding: 20px;
        border: 3px solid rgba(102, 126, 234, 0.8);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        max-width: 700px;
        backdrop-filter: blur(10px);
      }

      h1 {
        font-size: 2rem;
        margin-bottom: 5px;
        color: #5a67d8;
        text-shadow: 0 2px 4px rgba(90, 103, 216, 0.3);
      }

      .subtitle {
        font-size: 1rem;
        margin-bottom: 15px;
        color: #555;
      }

      .game-stats {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 10px;
        margin-bottom: 15px;
      }

      .stat-card {
        background: linear-gradient(135deg, #4facfe, #00f2fe);
        padding: 12px;
        border-radius: 15px;
        color: white;
        font-weight: bold;
        border: 2px solid #4facfe;
      }

      .stat-number {
        font-size: 1.5rem;
        display: block;
      }

      .stat-label {
        font-size: 0.8rem;
        opacity: 0.9;
      }

      .game-mode-selector {
        margin-bottom: 20px;
      }

      .mode-btn {
        background: linear-gradient(135deg, #a8edea, #fed6e3);
        color: #333;
        border: none;
        padding: 12px 20px;
        font-size: 1rem;
        border-radius: 20px;
        cursor: pointer;
        margin: 5px;
        transition: all 0.3s ease;
        font-weight: bold;
      }

      .mode-btn:hover {
        transform: scale(1.05);
      }

      .mode-btn.active {
        background: linear-gradient(135deg, #ff9a9e, #fecfef);
        box-shadow: 0 5px 15px rgba(255, 154, 158, 0.4);
      }

      .battle-arena {
        background: linear-gradient(135deg, #ffecd2, #fcb69f);
        border-radius: 25px;
        padding: 20px;
        margin: 20px 0;
        border: 3px solid #ff8a65;
        position: relative;
        overflow: hidden;
      }

      .vs-section {
        display: grid;
        grid-template-columns: 1fr auto 1fr;
        gap: 20px;
        align-items: center;
        margin: 20px 0;
      }

      .player-side,
      .computer-side {
        background: rgba(255, 255, 255, 0.9);
        border-radius: 20px;
        padding: 20px;
        border: 3px solid #ddd;
      }

      .player-choice,
      .computer-choice {
        font-size: 6rem;
        margin: 15px 0;
        transition: all 0.5s ease;
        filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.2));
      }

      .vs-divider {
        font-size: 3rem;
        color: #ff6b6b;
        font-weight: bold;
        text-shadow: 0 2px 4px rgba(255, 107, 107, 0.5);
      }

      .choice-buttons {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 15px;
        margin: 20px 0;
      }

      .choice-btn {
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        border: none;
        padding: 20px;
        font-size: 3rem;
        border-radius: 20px;
        cursor: pointer;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
      }

      .choice-btn:hover {
        transform: scale(1.1);
        box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
      }

      .choice-btn:active {
        transform: scale(0.95);
      }

      .choice-label {
        display: block;
        font-size: 0.9rem;
        margin-top: 5px;
        font-weight: bold;
      }

      .result-display {
        background: rgba(255, 255, 255, 0.9);
        border-radius: 20px;
        padding: 20px;
        margin: 20px 0;
        border: 3px solid #4ecdc4;
        min-height: 80px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .result-text {
        font-size: 1.5rem;
        font-weight: bold;
        color: #2c3e50;
      }

      .win {
        color: #27ae60;
      }
      .lose {
        color: #e74c3c;
      }
      .draw {
        color: #f39c12;
      }

      .tournament-mode {
        display: none;
      }

      .tournament-bracket {
        background: rgba(255, 255, 255, 0.9);
        border-radius: 20px;
        padding: 20px;
        margin: 15px 0;
        border: 3px solid #9b59b6;
      }

      .round-info {
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        padding: 15px;
        border-radius: 15px;
        margin-bottom: 15px;
        font-weight: bold;
        font-size: 1.2rem;
      }

      .tournament-progress {
        display: grid;
        grid-template-columns: repeat(5, 1fr);
        gap: 10px;
        margin: 15px 0;
      }

      .round-marker {
        background: #ecf0f1;
        height: 40px;
        border-radius: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        border: 2px solid #bdc3c7;
        transition: all 0.3s ease;
      }

      .round-marker.completed {
        background: linear-gradient(135deg, #2ecc71, #27ae60);
        color: white;
      }

      .round-marker.current {
        background: linear-gradient(135deg, #f39c12, #e67e22);
        color: white;
        animation: pulse 1.5s infinite;
      }

      @keyframes pulse {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.1);
        }
      }

      .special-modes {
        margin: 20px 0;
      }

      .special-btn {
        background: linear-gradient(135deg, #fd79a8, #fdcb6e);
        color: white;
        border: none;
        padding: 12px 20px;
        font-size: 1rem;
        border-radius: 15px;
        cursor: pointer;
        margin: 5px;
        transition: all 0.3s ease;
        font-weight: bold;
      }

      .special-btn:hover {
        transform: scale(1.05);
      }

      .achievements-section {
        background: rgba(255, 255, 255, 0.9);
        border-radius: 20px;
        padding: 15px;
        margin: 15px 0;
        border: 3px solid #e67e22;
      }

      .achievement {
        background: #e67e22;
        color: white;
        padding: 8px 15px;
        border-radius: 20px;
        margin: 5px;
        display: inline-block;
        font-size: 0.9rem;
        font-weight: bold;
      }

      .power-up-section {
        background: linear-gradient(135deg, #667eea, #764ba2);
        border-radius: 20px;
        padding: 15px;
        margin: 15px 0;
        color: white;
        display: none;
      }

      .power-up {
        background: rgba(255, 255, 255, 0.2);
        border: 2px solid white;
        color: white;
        padding: 10px 15px;
        border-radius: 15px;
        margin: 5px;
        cursor: pointer;
        transition: all 0.3s ease;
        display: inline-block;
      }

      .power-up:hover {
        background: rgba(255, 255, 255, 0.3);
        transform: scale(1.05);
      }

      .combo-display {
        background: linear-gradient(135deg, #ff9a9e, #fecfef);
        border-radius: 15px;
        padding: 10px;
        margin: 10px 0;
        border: 2px solid #ff6b9d;
        color: #d63384;
        font-weight: bold;
        display: none;
      }

      .effect {
        position: absolute;
        font-size: 2rem;
        animation: float-effect 1.5s ease-out forwards;
        pointer-events: none;
        z-index: 100;
      }

      @keyframes float-effect {
        0% {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
        100% {
          opacity: 0;
          transform: translateY(-80px) scale(1.5);
        }
      }

      .countdown {
        font-size: 3rem;
        color: #e74c3c;
        font-weight: bold;
        margin: 20px 0;
      }

      .difficulty-selector {
        margin-bottom: 20px;
      }

      .difficulty-btn {
        background: linear-gradient(135deg, #74b9ff, #0984e3);
        color: white;
        border: none;
        padding: 10px 20px;
        font-size: 0.9rem;
        border-radius: 20px;
        cursor: pointer;
        margin: 5px;
        transition: all 0.3s ease;
      }

      .difficulty-btn:hover {
        transform: scale(1.05);
      }

      .difficulty-btn.active {
        background: linear-gradient(135deg, #00b894, #00a085);
      }

      .reset-btn {
        background: linear-gradient(135deg, #e74c3c, #c0392b);
        color: white;
        border: none;
        padding: 12px 25px;
        font-size: 1rem;
        border-radius: 20px;
        cursor: pointer;
        margin: 10px;
        transition: all 0.3s ease;
        font-weight: bold;
      }

      .reset-btn:hover {
        transform: scale(1.05);
      }
    </style>
  </head>
  <body>
    <a href="../../index.html" class="back-to-games">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –∏–≥—Ä–∞–º</a>
    <div class="game-container">
      <h1>‚úÇÔ∏è –¢—É—Ä–Ω–∏—Ä –ß–µ–º–ø–∏–æ–Ω–æ–≤ ‚úÇÔ∏è</h1>
      <p class="subtitle">–ö–∞–º–µ–Ω—å-–ù–æ–∂–Ω–∏—Ü—ã-–ë—É–º–∞–≥–∞ –∫–∞–∫ –Ω–∏–∫–æ–≥–¥–∞ —Ä–∞–Ω—å—à–µ!</p>

      <div class="game-stats">
        <div class="stat-card">
          <span class="stat-number" id="wins">0</span>
          <span class="stat-label">–ü–æ–±–µ–¥—ã</span>
        </div>
        <div class="stat-card">
          <span class="stat-number" id="losses">0</span>
          <span class="stat-label">–ü–æ—Ä–∞–∂–µ–Ω–∏—è</span>
        </div>
        <div class="stat-card">
          <span class="stat-number" id="draws">0</span>
          <span class="stat-label">–ù–∏—á—å–∏</span>
        </div>
        <div class="stat-card">
          <span class="stat-number" id="streak">0</span>
          <span class="stat-label">–°–µ—Ä–∏—è</span>
        </div>
      </div>

      <div class="game-mode-selector">
        <button
          class="mode-btn active"
          onclick="setGameMode('classic')"
          id="classic-mode"
        >
          üéØ –ö–ª–∞—Å—Å–∏–∫–∞
        </button>
        <button
          class="mode-btn"
          onclick="setGameMode('tournament')"
          id="tournament-mode"
        >
          üèÜ –¢—É—Ä–Ω–∏—Ä
        </button>
        <button
          class="mode-btn"
          onclick="setGameMode('survival')"
          id="survival-mode"
        >
          ‚öîÔ∏è –í—ã–∂–∏–≤–∞–Ω–∏–µ
        </button>
      </div>

      <div class="difficulty-selector">
        <p><strong>–£—Ä–æ–≤–µ–Ω—å –ò–ò:</strong></p>
        <button
          class="difficulty-btn active"
          onclick="setDifficulty('easy')"
          id="easy"
        >
          üòä –ù–æ–≤–∏—á–æ–∫
        </button>
        <button
          class="difficulty-btn"
          onclick="setDifficulty('medium')"
          id="medium"
        >
          ü§î –û–ø—ã—Ç–Ω—ã–π
        </button>
        <button
          class="difficulty-btn"
          onclick="setDifficulty('hard')"
          id="hard"
        >
          üß† –ú–∞—Å—Ç–µ—Ä
        </button>
      </div>

      <!-- –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º -->
      <div id="classic-section">
        <div class="battle-arena">
          <div class="vs-section">
            <div class="player-side">
              <h3 style="color: #2980b9; margin-top: 0">üë§ –¢—ã</h3>
              <div class="player-choice" id="playerChoice">‚ùì</div>
            </div>
            <div class="vs-divider">VS</div>
            <div class="computer-side">
              <h3 style="color: #e74c3c; margin-top: 0">ü§ñ –ö–æ–º–ø—å—é—Ç–µ—Ä</h3>
              <div class="computer-choice" id="computerChoice">‚ùì</div>
            </div>
          </div>

          <div class="choice-buttons">
            <button
              class="choice-btn"
              onclick="makeChoice('rock')"
              id="rock-btn"
            >
              ‚úä
              <span class="choice-label">–ö–∞–º–µ–Ω—å</span>
            </button>
            <button
              class="choice-btn"
              onclick="makeChoice('paper')"
              id="paper-btn"
            >
              ‚úã
              <span class="choice-label">–ë—É–º–∞–≥–∞</span>
            </button>
            <button
              class="choice-btn"
              onclick="makeChoice('scissors')"
              id="scissors-btn"
            >
              ‚úåÔ∏è
              <span class="choice-label">–ù–æ–∂–Ω–∏—Ü—ã</span>
            </button>
          </div>
        </div>

        <div class="combo-display" id="comboDisplay">
          üî• –ö–û–ú–ë–û x3! –¢—ã –≤ —É–¥–∞—Ä–µ!
        </div>

        <div class="result-display">
          <div class="result-text" id="resultText">–í—ã–±–µ—Ä–∏ —Å–≤–æ–π —Ö–æ–¥!</div>
        </div>
      </div>

      <!-- –¢—É—Ä–Ω–∏—Ä–Ω—ã–π —Ä–µ–∂–∏–º -->
      <div id="tournament-section" class="tournament-mode">
        <div class="round-info" id="tournamentInfo">
          üèÜ –¢—É—Ä–Ω–∏—Ä –Ω–∞ 5 –ø–æ–±–µ–¥! –†–∞—É–Ω–¥ 1
        </div>

        <div class="tournament-progress" id="tournamentProgress">
          <div class="round-marker current">1</div>
          <div class="round-marker">2</div>
          <div class="round-marker">3</div>
          <div class="round-marker">4</div>
          <div class="round-marker">5</div>
        </div>

        <div class="tournament-bracket">
          <p><strong>üéØ –¶–µ–ª—å:</strong> –í—ã–∏–≥—Ä–∞–π 5 —Ä–∞—É–Ω–¥–æ–≤ –∏–∑ 9 –≤–æ–∑–º–æ–∂–Ω—ã—Ö!</p>
          <p id="tournamentStatus">–°—Ç–∞—Ç—É—Å: –ì–æ—Ç–æ–≤ –∫ –±–æ—é! üí™</p>
        </div>
      </div>

      <!-- –†–µ–∂–∏–º –≤—ã–∂–∏–≤–∞–Ω–∏—è -->
      <div id="survival-section" class="tournament-mode">
        <div class="round-info">‚öîÔ∏è –†–µ–∂–∏–º –≤—ã–∂–∏–≤–∞–Ω–∏—è! –°–∫–æ–ª—å–∫–æ –ø—Ä–æ–¥–µ—Ä–∂–∏—à—å—Å—è?</div>
        <div
          style="
            background: rgba(231, 76, 60, 0.1);
            padding: 15px;
            border-radius: 15px;
            margin: 15px 0;
          "
        >
          <p><strong>‚ùó –ü—Ä–∞–≤–∏–ª–∞:</strong> –û–¥–Ω–æ –ø–æ—Ä–∞–∂–µ–Ω–∏–µ = –∫–æ–Ω–µ—Ü –∏–≥—Ä—ã!</p>
          <p>
            <strong>üèÜ –†–µ–∫–æ—Ä–¥ –≤—ã–∂–∏–≤–∞–Ω–∏—è:</strong>
            <span id="survivalRecord">0</span> –ø–æ–±–µ–¥
          </p>
        </div>
      </div>

      <div class="power-up-section" id="powerUpSection">
        <h4 style="margin-top: 0">‚ö° –°–∏–ª–∞-–∞–ø—ã (–¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞ 10+ —Å–µ—Ä–∏–∏):</h4>
        <div class="power-up" onclick="usePowerUp('shield')">
          üõ°Ô∏è –©–∏—Ç (–±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ—Ä–∞–∂–µ–Ω–∏–µ)
        </div>
        <div class="power-up" onclick="usePowerUp('double')">
          ‚ö° –î–≤–æ–π–Ω—ã–µ –æ—á–∫–∏
        </div>
        <div class="power-up" onclick="usePowerUp('predict')">
          üîÆ –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ —Ö–æ–¥–∞
        </div>
      </div>

      <div class="special-modes">
        <button class="special-btn" onclick="quickMatch()">
          ‚ö° –ë—ã—Å—Ç—Ä—ã–π –º–∞—Ç—á
        </button>
        <button class="special-btn" onclick="showRules()">üìñ –ü—Ä–∞–≤–∏–ª–∞</button>
        <button class="reset-btn" onclick="resetGame()">
          üîÑ –°–±—Ä–æ—Å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        </button>
      </div>

      <div class="achievements-section">
        <h4 style="margin-top: 0; color: #d35400">üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è:</h4>
        <div id="achievementsList">–ò–≥—Ä–∞–π, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è!</div>
      </div>
    </div>

    <script>
      // –ò–≥—Ä–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
      let gameState = {
        wins: 0,
        losses: 0,
        draws: 0,
        streak: 0,
        maxStreak: 0,
        totalGames: 0,
        mode: "classic",
        difficulty: "easy",
        tournament: {
          round: 1,
          playerWins: 0,
          computerWins: 0,
          maxRounds: 5,
        },
        survival: {
          record: 0,
          current: 0,
        },
        powerUps: {
          shield: false,
          double: false,
          predict: false,
        },
      };

      let achievements = [];
      let computerHistory = [];

      // –í–∞—Ä–∏–∞–Ω—Ç—ã —Ö–æ–¥–æ–≤
      const choices = {
        rock: { emoji: "‚úä", name: "–ö–∞–º–µ–Ω—å" },
        paper: { emoji: "‚úã", name: "–ë—É–º–∞–≥–∞" },
        scissors: { emoji: "‚úåÔ∏è", name: "–ù–æ–∂–Ω–∏—Ü—ã" },
      };

      // –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
      const achievementsList = [
        {
          id: "first_win",
          name: "üåü –ü–µ—Ä–≤–∞—è –ø–æ–±–µ–¥–∞",
          condition: () => gameState.wins >= 1,
        },
        {
          id: "streak_5",
          name: "üî• –ü—è—Ç–µ—Ä–Ω–∞—è —Å–µ—Ä–∏—è",
          condition: () => gameState.maxStreak >= 5,
        },
        {
          id: "wins_10",
          name: "üèÜ –î—é–∂–∏–Ω–∞ –ø–æ–±–µ–¥",
          condition: () => gameState.wins >= 10,
        },
        {
          id: "tournament_win",
          name: "üëë –¢—É—Ä–Ω–∏—Ä–Ω—ã–π —á–µ–º–ø–∏–æ–Ω",
          condition: () => gameState.tournament.playerWins >= 5,
        },
        {
          id: "survival_10",
          name: "‚öîÔ∏è –í—ã–∂–∏–≤–∞–ª—å—â–∏–∫",
          condition: () => gameState.survival.record >= 10,
        },
        {
          id: "no_losses",
          name: "üõ°Ô∏è –ù–µ–ø—Ä–∏–∫–∞—Å–∞–µ–º—ã–π",
          condition: () => gameState.wins >= 20 && gameState.losses === 0,
        },
      ];

      // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–≥—Ä–æ–≤–æ–≥–æ —Ä–µ–∂–∏–º–∞
      function setGameMode(mode) {
        gameState.mode = mode;

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–π –∫–Ω–æ–ø–∫–∏
        document
          .querySelectorAll(".mode-btn")
          .forEach((btn) => btn.classList.remove("active"));
        document.getElementById(mode + "-mode").classList.add("active");

        // –ü–æ–∫–∞–∑ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Å–µ–∫—Ü–∏–π
        document.getElementById("classic-section").style.display =
          mode === "classic" ? "block" : "none";
        document.getElementById("tournament-section").style.display =
          mode === "tournament" ? "block" : "none";
        document.getElementById("survival-section").style.display =
          mode === "survival" ? "block" : "none";

        // –ü–æ–∫–∞–∑ —Å–∏–ª—ã-–∞–ø–æ–≤ –¥–ª—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö —Ä–µ–∂–∏–º–æ–≤
        document.getElementById("powerUpSection").style.display =
          mode !== "classic" || gameState.streak >= 10 ? "block" : "none";

        resetRound();
      }

      // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
      function setDifficulty(level) {
        gameState.difficulty = level;

        document
          .querySelectorAll(".difficulty-btn")
          .forEach((btn) => btn.classList.remove("active"));
        document.getElementById(level).classList.add("active");
      }

      // –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–±–æ—Ä–∞
      function makeChoice(playerChoice) {
        const computerChoice = getComputerChoice();

        // –ê–Ω–∏–º–∞—Ü–∏—è
        showChoiceAnimation(playerChoice, computerChoice);

        setTimeout(() => {
          const result = determineWinner(playerChoice, computerChoice);
          displayResult(result, playerChoice, computerChoice);
          updateStats(result);
          checkAchievements();

          if (gameState.mode === "tournament") {
            updateTournament(result);
          } else if (gameState.mode === "survival") {
            updateSurvival(result);
          }
        }, 1500);
      }

      // –ò–ò –≤—ã–±–æ—Ä —Ö–æ–¥–∞
      function getComputerChoice() {
        const choices = ["rock", "paper", "scissors"];

        switch (gameState.difficulty) {
          case "easy":
            return choices[Math.floor(Math.random() * 3)];

          case "medium":
            // –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –ò–ò - –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Ö–æ–¥—ã –∏–≥—Ä–æ–∫–∞
            if (computerHistory.length >= 3) {
              const lastThree = computerHistory.slice(-3);
              const playerPatterns = {
                rock: lastThree.filter((h) => h.player === "rock").length,
                paper: lastThree.filter((h) => h.player === "paper").length,
                scissors: lastThree.filter((h) => h.player === "scissors")
                  .length,
              };

              // –ü—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞–µ–º —Å–ª–µ–¥—É—é—â–∏–π —Ö–æ–¥ –∏–≥—Ä–æ–∫–∞
              let predictedChoice = Object.keys(playerPatterns).reduce((a, b) =>
                playerPatterns[a] > playerPatterns[b] ? a : b
              );

              // –ö–æ–Ω—Ç—Ä–∞—Ç–∞–∫—É–µ–º
              const counter = {
                rock: "paper",
                paper: "scissors",
                scissors: "rock",
              };
              return Math.random() < 0.7
                ? counter[predictedChoice]
                : choices[Math.floor(Math.random() * 3)];
            }
            return choices[Math.floor(Math.random() * 3)];

          case "hard":
            // –£–º–Ω—ã–π –ò–ò —Å –ø–∞–º—è—Ç—å—é –∏ –∞–¥–∞–ø—Ç–∞—Ü–∏–µ–π
            if (computerHistory.length >= 2) {
              const lastMove =
                computerHistory[computerHistory.length - 1].player;
              const counter = {
                rock: "paper",
                paper: "scissors",
                scissors: "rock",
              };

              // 80% —à–∞–Ω—Å –∫–æ–Ω—Ç—Ä–∞—Ç–∞–∫–∏ –ø—Ä–æ—Ç–∏–≤ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
              if (Math.random() < 0.8) {
                return counter[lastMove];
              }
            }
            return choices[Math.floor(Math.random() * 3)];

          default:
            return choices[Math.floor(Math.random() * 3)];
        }
      }

      // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–±–µ–¥–∏—Ç–µ–ª—è
      function determineWinner(player, computer) {
        if (player === computer) return "draw";

        const winConditions = {
          rock: "scissors",
          paper: "rock",
          scissors: "paper",
        };

        return winConditions[player] === computer ? "win" : "lose";
      }

      // –ê–Ω–∏–º–∞—Ü–∏—è –≤—ã–±–æ—Ä–∞
      function showChoiceAnimation(playerChoice, computerChoice) {
        const playerDisplay = document.getElementById("playerChoice");
        const computerDisplay = document.getElementById("computerChoice");
        const resultText = document.getElementById("resultText");

        resultText.textContent = "3... 2... 1... –ü–æ–∫–∞–∂–∏—Ç–µ!";
        resultText.className = "result-text";

        // –ê–Ω–∏–º–∞—Ü–∏—è "–¥—É–º–∞–Ω–∏—è"
        let countdown = 3;
        const countdownInterval = setInterval(() => {
          playerDisplay.textContent = "‚ùì";
          computerDisplay.textContent = "‚ùì";
          countdown--;

          if (countdown <= 0) {
            clearInterval(countdownInterval);
            playerDisplay.textContent = choices[playerChoice].emoji;
            computerDisplay.textContent = choices[computerChoice].emoji;
          }
        }, 500);
      }

      // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
      function displayResult(result, playerChoice, computerChoice) {
        const resultText = document.getElementById("resultText");
        const playerName = choices[playerChoice].name;
        const computerName = choices[computerChoice].name;

        switch (result) {
          case "win":
            resultText.textContent = `üéâ –¢—ã –ø–æ–±–µ–¥–∏–ª! ${playerName} –±—å—ë—Ç ${computerName}!`;
            resultText.className = "result-text win";
            createEffect("üéâ");
            break;
          case "lose":
            resultText.textContent = `üòî –¢—ã –ø—Ä–æ–∏–≥—Ä–∞–ª! ${computerName} –±—å—ë—Ç ${playerName}!`;
            resultText.className = "result-text lose";
            createEffect("üíî");
            break;
          case "draw":
            resultText.textContent = `ü§ù –ù–∏—á—å—è! –û–±–∞ –≤—ã–±—Ä–∞–ª–∏ ${playerName}!`;
            resultText.className = "result-text draw";
            createEffect("‚ö°");
            break;
        }

        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∏—Å—Ç–æ—Ä–∏—é
        computerHistory.push({
          player: playerChoice,
          computer: computerChoice,
          result,
        });
        if (computerHistory.length > 10) computerHistory.shift();
      }

      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
      function updateStats(result) {
        gameState.totalGames++;

        switch (result) {
          case "win":
            gameState.wins++;
            gameState.streak++;
            gameState.maxStreak = Math.max(
              gameState.maxStreak,
              gameState.streak
            );

            // –ü–æ–∫–∞–∑ –∫–æ–º–±–æ
            if (gameState.streak >= 3) {
              const comboDisplay = document.getElementById("comboDisplay");
              comboDisplay.textContent = `üî• –ö–û–ú–ë–û x${gameState.streak}! –¢—ã –≤ —É–¥–∞—Ä–µ!`;
              comboDisplay.style.display = "block";
              setTimeout(() => (comboDisplay.style.display = "none"), 3000);
            }
            break;
          case "lose":
            gameState.losses++;
            gameState.streak = 0;
            break;
          case "draw":
            gameState.draws++;
            break;
        }

        updateDisplay();
      }

      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
      function updateDisplay() {
        document.getElementById("wins").textContent = gameState.wins;
        document.getElementById("losses").textContent = gameState.losses;
        document.getElementById("draws").textContent = gameState.draws;
        document.getElementById("streak").textContent = gameState.streak;

        // –ü–æ–∫–∞–∑–∞—Ç—å —Å–∏–ª—ã-–∞–ø—ã –ø—Ä–∏ –±–æ–ª—å—à–æ–π —Å–µ—Ä–∏–∏
        if (gameState.streak >= 10) {
          document.getElementById("powerUpSection").style.display = "block";
        }
      }

      // –¢—É—Ä–Ω–∏—Ä–Ω—ã–π —Ä–µ–∂–∏–º
      function updateTournament(result) {
        if (result === "win") {
          gameState.tournament.playerWins++;
        } else if (result === "lose") {
          gameState.tournament.computerWins++;
        }

        gameState.tournament.round++;

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
        const markers = document.querySelectorAll(".round-marker");
        markers.forEach((marker, index) => {
          marker.classList.remove("current", "completed");
          if (index < gameState.tournament.playerWins) {
            marker.classList.add("completed");
          } else if (index === gameState.tournament.playerWins) {
            marker.classList.add("current");
          }
        });

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è —Ç—É—Ä–Ω–∏—Ä–∞
        if (gameState.tournament.playerWins >= 5) {
          document.getElementById("tournamentStatus").textContent =
            "üèÜ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –¢—ã –≤—ã–∏–≥—Ä–∞–ª —Ç—É—Ä–Ω–∏—Ä!";
          createEffect("üèÜ");
        } else if (gameState.tournament.computerWins >= 5) {
          document.getElementById("tournamentStatus").textContent =
            "üòî –¢—É—Ä–Ω–∏—Ä –ø—Ä–æ–∏–≥—Ä–∞–Ω. –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑!";
          setTimeout(() => resetTournament(), 3000);
        }

        document.getElementById(
          "tournamentInfo"
        ).textContent = `üèÜ –¢—É—Ä–Ω–∏—Ä –Ω–∞ 5 –ø–æ–±–µ–¥! –†–∞—É–Ω–¥ ${gameState.tournament.round} (${gameState.tournament.playerWins}:${gameState.tournament.computerWins})`;
      }

      // –†–µ–∂–∏–º –≤—ã–∂–∏–≤–∞–Ω–∏—è
      function updateSurvival(result) {
        if (result === "win") {
          gameState.survival.current++;
          gameState.survival.record = Math.max(
            gameState.survival.record,
            gameState.survival.current
          );
          document.getElementById("survivalRecord").textContent =
            gameState.survival.record;
        } else if (result === "lose") {
          createEffect("üíÄ");
          alert(
            `üíÄ –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞! –¢–≤–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: ${gameState.survival.current} –ø–æ–±–µ–¥!`
          );
          gameState.survival.current = 0;
        }
      }

      // –°–∏–ª–∞-–∞–ø—ã
      function usePowerUp(type) {
        if (gameState.streak < 10) {
          alert("–ù—É–∂–Ω–∞ —Å–µ—Ä–∏—è –∏–∑ 10+ –ø–æ–±–µ–¥ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–∏–ª—ã-–∞–ø–æ–≤!");
          return;
        }

        switch (type) {
          case "shield":
            gameState.powerUps.shield = true;
            gameState.streak -= 5;
            alert("üõ°Ô∏è –©–∏—Ç –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω! –°–ª–µ–¥—É—é—â–µ–µ –ø–æ—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –∑–∞—Å—á–∏—Ç–∞–µ—Ç—Å—è!");
            break;
          case "double":
            gameState.powerUps.double = true;
            gameState.streak -= 3;
            alert("‚ö° –°–ª–µ–¥—É—é—â–∞—è –ø–æ–±–µ–¥–∞ –ø—Ä–∏–Ω–µ—Å—ë—Ç –¥–≤–æ–π–Ω—ã–µ –æ—á–∫–∏!");
            break;
          case "predict":
            gameState.powerUps.predict = true;
            gameState.streak -= 7;
            alert("üîÆ –°–ª–µ–¥—É—é—â–∏–π —Ö–æ–¥ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ –±—É–¥–µ—Ç –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω!");
            break;
        }
        updateDisplay();
      }

      // –°–æ–∑–¥–∞–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
      function createEffect(emoji) {
        for (let i = 0; i < 5; i++) {
          const effect = document.createElement("div");
          effect.className = "effect";
          effect.textContent = emoji;
          effect.style.left = Math.random() * window.innerWidth + "px";
          effect.style.top = Math.random() * window.innerHeight + "px";

          document.body.appendChild(effect);
          setTimeout(() => effect.remove(), 1500);
        }
      }

      // –ë—ã—Å—Ç—Ä—ã–π –º–∞—Ç—á
      function quickMatch() {
        const choices = ["rock", "paper", "scissors"];
        const randomChoice = choices[Math.floor(Math.random() * 3)];
        makeChoice(randomChoice);
      }

      // –ü–æ–∫–∞–∑ –ø—Ä–∞–≤–∏–ª
      function showRules() {
        alert(`
üìñ –ü–†–ê–í–ò–õ–ê –ò–ì–†–´:

‚úä –ö–∞–º–µ–Ω—å –±—å—ë—Ç –ù–æ–∂–Ω–∏—Ü—ã
‚úã –ë—É–º–∞–≥–∞ –±—å—ë—Ç –ö–∞–º–µ–Ω—å  
‚úåÔ∏è –ù–æ–∂–Ω–∏—Ü—ã –±—å—é—Ç –ë—É–º–∞–≥—É

üéÆ –†–ï–ñ–ò–ú–´:
‚Ä¢ –ö–ª–∞—Å—Å–∏–∫–∞ - –æ–±—ã—á–Ω–∞—è –∏–≥—Ä–∞
‚Ä¢ –¢—É—Ä–Ω–∏—Ä - –ø–µ—Ä–≤—ã–π –¥–æ 5 –ø–æ–±–µ–¥
‚Ä¢ –í—ã–∂–∏–≤–∞–Ω–∏–µ - –æ–¥–Ω–æ –ø–æ—Ä–∞–∂–µ–Ω–∏–µ = –∫–æ–Ω–µ—Ü

‚ö° –°–ò–õ–´-–ê–ü–´:
–î–æ—Å—Ç—É–ø–Ω—ã –ø—Ä–∏ —Å–µ—Ä–∏–∏ 10+ –ø–æ–±–µ–¥

üèÜ –î–û–°–¢–ò–ñ–ï–ù–ò–Ø:
–í—ã–ø–æ–ª–Ω—è–π —É—Å–ª–æ–≤–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–∞–≥—Ä–∞–¥!
            `);
      }

      // –°–±—Ä–æ—Å –∏–≥—Ä—ã
      function resetGame() {
        if (confirm("–°–±—Ä–æ—Å–∏—Ç—å –≤—Å—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É?")) {
          gameState = {
            wins: 0,
            losses: 0,
            draws: 0,
            streak: 0,
            maxStreak: 0,
            totalGames: 0,
            mode: "classic",
            difficulty: "easy",
            tournament: {
              round: 1,
              playerWins: 0,
              computerWins: 0,
              maxRounds: 5,
            },
            survival: { record: 0, current: 0 },
            powerUps: { shield: false, double: false, predict: false },
          };
          achievements = [];
          computerHistory = [];
          updateDisplay();
          updateAchievements();
          resetRound();
        }
      }

      // –°–±—Ä–æ—Å —Ä–∞—É–Ω–¥–∞
      function resetRound() {
        document.getElementById("playerChoice").textContent = "‚ùì";
        document.getElementById("computerChoice").textContent = "‚ùì";
        document.getElementById("resultText").textContent = "–í—ã–±–µ—Ä–∏ —Å–≤–æ–π —Ö–æ–¥!";
        document.getElementById("resultText").className = "result-text";
      }

      // –°–±—Ä–æ—Å —Ç—É—Ä–Ω–∏—Ä–∞
      function resetTournament() {
        gameState.tournament = {
          round: 1,
          playerWins: 0,
          computerWins: 0,
          maxRounds: 5,
        };
        document.getElementById("tournamentStatus").textContent =
          "–ì–æ—Ç–æ–≤ –∫ –Ω–æ–≤–æ–º—É —Ç—É—Ä–Ω–∏—Ä—É! üí™";
        document.querySelectorAll(".round-marker").forEach((marker, index) => {
          marker.classList.remove("current", "completed");
          if (index === 0) marker.classList.add("current");
        });
      }

      // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
      function checkAchievements() {
        achievementsList.forEach((achievement) => {
          if (
            !achievements.includes(achievement.id) &&
            achievement.condition()
          ) {
            achievements.push(achievement.id);
            createEffect("üèÜ");
            setTimeout(() => alert(`üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ: ${achievement.name}!`), 500);
            updateAchievements();
          }
        });
      }

      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
      function updateAchievements() {
        const list = document.getElementById("achievementsList");

        if (achievements.length === 0) {
          list.innerHTML = "–ò–≥—Ä–∞–π, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è!";
          return;
        }

        list.innerHTML = achievementsList
          .filter((a) => achievements.includes(a.id))
          .map((a) => `<span class="achievement">${a.name}</span>`)
          .join("");
      }

      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
      document.addEventListener("DOMContentLoaded", function () {
        updateDisplay();
        updateAchievements();
      });
    </script>
  </body>
</html>
