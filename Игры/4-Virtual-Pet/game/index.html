<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–ú–æ–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –ø–∏—Ç–æ–º–µ—Ü - –¢–∞–º–∞–≥–æ—á–∏ 2.0!</title>
    <style>
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(
          135deg,
          #a8e6cf 0%,
          #dcedc1 50%,
          #ffd3a5 100%
        );
        margin: 0;
        padding: 10px;
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #333;
      }

      .back-to-games {
        position: fixed;
        top: 20px;
        left: 20px;
        background: #4caf50;
        color: white;
        padding: 12px 20px;
        border-radius: 25px;
        text-decoration: none;
        font-weight: 600;
        font-size: 0.95rem;
        box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
        transition: all 0.3s ease;
        z-index: 1000;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .back-to-games:hover {
        background: #45a049;
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
      }

      .game-container {
        text-align: center;
        background: rgba(255, 255, 255, 0.95);
        border-radius: 25px;
        padding: 20px;
        border: 3px solid rgba(168, 230, 207, 0.8);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        max-width: 700px;
        backdrop-filter: blur(10px);
      }

      h1 {
        font-size: 2rem;
        margin-bottom: 5px;
        color: #27ae60;
        text-shadow: 0 2px 4px rgba(39, 174, 96, 0.3);
      }

      .subtitle {
        font-size: 1rem;
        margin-bottom: 15px;
        color: #555;
      }

      .pet-container {
        background: linear-gradient(135deg, #74b9ff, #0984e3);
        border-radius: 20px;
        padding: 20px;
        margin: 15px 0;
        border: 3px solid #0984e3;
        position: relative;
        overflow: hidden;
      }

      .pet-name {
        color: white;
        font-size: 1.3rem;
        font-weight: bold;
        margin-bottom: 10px;
      }

      .pet-display {
        font-size: 8rem;
        margin: 10px 0;
        filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
        transition: all 0.5s ease;
      }

      .pet-info {
        background: rgba(255, 255, 255, 0.9);
        border-radius: 15px;
        padding: 15px;
        margin: 15px 0;
        color: #333;
      }

      .pet-stats {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 10px;
        margin-bottom: 15px;
      }

      .stat-bar {
        background: #ecf0f1;
        border-radius: 20px;
        height: 25px;
        position: relative;
        overflow: hidden;
        border: 2px solid #bdc3c7;
      }

      .stat-fill {
        height: 100%;
        border-radius: 18px;
        transition: width 0.5s ease;
        position: relative;
      }

      .stat-label {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-weight: bold;
        font-size: 0.8rem;
        color: #2c3e50;
        z-index: 10;
      }

      .hunger-fill {
        background: linear-gradient(90deg, #e74c3c, #c0392b);
      }
      .happiness-fill {
        background: linear-gradient(90deg, #f39c12, #e67e22);
      }
      .energy-fill {
        background: linear-gradient(90deg, #9b59b6, #8e44ad);
      }
      .cleanliness-fill {
        background: linear-gradient(90deg, #3498db, #2980b9);
      }

      .action-buttons {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 10px;
        margin: 15px 0;
      }

      .action-btn {
        background: linear-gradient(135deg, #2ecc71, #27ae60);
        color: white;
        border: none;
        padding: 15px 20px;
        font-size: 1rem;
        border-radius: 15px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: bold;
        position: relative;
        overflow: hidden;
      }

      .action-btn:hover {
        transform: scale(1.05);
        box-shadow: 0 5px 15px rgba(46, 204, 113, 0.4);
      }

      .action-btn:disabled {
        background: linear-gradient(135deg, #bdc3c7, #95a5a6);
        cursor: not-allowed;
        transform: none;
      }

      .feed-btn {
        background: linear-gradient(135deg, #e74c3c, #c0392b);
      }
      .play-btn {
        background: linear-gradient(135deg, #f39c12, #e67e22);
      }
      .sleep-btn {
        background: linear-gradient(135deg, #9b59b6, #8e44ad);
      }
      .clean-btn {
        background: linear-gradient(135deg, #3498db, #2980b9);
      }

      .game-stats {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 8px;
        margin: 15px 0;
      }

      .game-stat {
        background: linear-gradient(135deg, #fd79a8, #e84393);
        color: white;
        padding: 10px;
        border-radius: 12px;
        font-weight: bold;
      }

      .stat-number {
        display: block;
        font-size: 1.2rem;
      }

      .stat-name {
        font-size: 0.7rem;
        opacity: 0.9;
      }

      .status-message {
        background: rgba(52, 152, 219, 0.1);
        border: 2px solid #3498db;
        border-radius: 15px;
        padding: 10px;
        margin: 15px 0;
        font-weight: bold;
        color: #2980b9;
        min-height: 25px;
      }

      .minigame-section {
        background: linear-gradient(135deg, #ff9a9e, #fecfef);
        border-radius: 20px;
        padding: 15px;
        margin: 15px 0;
        border: 3px solid #ff6b9d;
        display: none;
      }

      .minigame-title {
        color: #d63384;
        font-size: 1.2rem;
        font-weight: bold;
        margin-bottom: 10px;
      }

      .color-buttons {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 8px;
        margin: 10px 0;
      }

      .color-btn {
        height: 50px;
        border: none;
        border-radius: 10px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: bold;
        color: white;
      }

      .color-btn:hover {
        transform: scale(1.1);
      }

      .achievements-section {
        background: rgba(255, 255, 255, 0.9);
        border-radius: 15px;
        padding: 15px;
        margin: 15px 0;
        border: 2px solid #f39c12;
      }

      .achievement {
        background: #f39c12;
        color: white;
        padding: 5px 12px;
        border-radius: 15px;
        margin: 3px;
        display: inline-block;
        font-size: 0.8rem;
        font-weight: bold;
      }

      .emotion {
        position: absolute;
        font-size: 2rem;
        animation: float-up 2s ease-out forwards;
        pointer-events: none;
        z-index: 100;
      }

      @keyframes float-up {
        0% {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
        100% {
          opacity: 0;
          transform: translateY(-100px) scale(1.5);
        }
      }

      .evolution-popup {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: linear-gradient(135deg, #ffd89b, #19547b);
        color: white;
        padding: 30px;
        border-radius: 20px;
        border: 4px solid #fff;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        z-index: 1000;
        text-align: center;
        display: none;
      }

      .save-load-buttons {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
        margin: 15px 0;
      }

      .save-btn,
      .load-btn {
        background: linear-gradient(135deg, #a29bfe, #6c5ce7);
        color: white;
        border: none;
        padding: 10px;
        font-size: 0.9rem;
        border-radius: 10px;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .time-display {
        background: rgba(0, 0, 0, 0.1);
        padding: 8px;
        border-radius: 10px;
        margin: 10px 0;
        font-weight: bold;
        color: #2c3e50;
      }
    </style>
  </head>
  <body>
    <a href="../../index.html" class="back-to-games">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –∏–≥—Ä–∞–º</a>
    <div class="game-container">
      <h1>üêæ –ú–æ–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –ø–∏—Ç–æ–º–µ—Ü üêæ</h1>
      <p class="subtitle">–ü–æ–∑–∞–±–æ—Ç—å—Å—è –æ —Å–≤–æ—ë–º —Ü–∏—Ñ—Ä–æ–≤–æ–º –¥—Ä—É–≥–µ!</p>

      <div class="time-display">
        ‚è∞ –í—Ä–µ–º—è –∂–∏–∑–Ω–∏: <span id="lifeTime">0 –º–∏–Ω</span>
      </div>

      <div class="pet-container">
        <div class="pet-name" id="petName">–¢–≤–æ–π –ø–∏—Ç–æ–º–µ—Ü</div>
        <div class="pet-display" id="petDisplay">ü•ö</div>

        <div class="pet-info">
          <div class="pet-stats">
            <div class="stat-bar">
              <div
                class="stat-fill hunger-fill"
                id="hungerBar"
                style="width: 100%"
              ></div>
              <div class="stat-label">üçé –°—ã—Ç–æ—Å—Ç—å</div>
            </div>
            <div class="stat-bar">
              <div
                class="stat-fill happiness-fill"
                id="happinessBar"
                style="width: 100%"
              ></div>
              <div class="stat-label">üòä –°—á–∞—Å—Ç—å–µ</div>
            </div>
            <div class="stat-bar">
              <div
                class="stat-fill energy-fill"
                id="energyBar"
                style="width: 100%"
              ></div>
              <div class="stat-label">‚ö° –≠–Ω–µ—Ä–≥–∏—è</div>
            </div>
            <div class="stat-bar">
              <div
                class="stat-fill cleanliness-fill"
                id="cleanlinessBar"
                style="width: 100%"
              ></div>
              <div class="stat-label">üßº –ß–∏—Å—Ç–æ—Ç–∞</div>
            </div>
          </div>
        </div>
      </div>

      <div class="action-buttons">
        <button class="action-btn feed-btn" onclick="feedPet()">
          üçé –ü–æ–∫–æ—Ä–º–∏—Ç—å
        </button>
        <button class="action-btn play-btn" onclick="startMinigame()">
          üéÆ –ò–≥—Ä–∞—Ç—å
        </button>
        <button class="action-btn sleep-btn" onclick="putToSleep()">
          üí§ –°–ø–∞—Ç—å
        </button>
        <button class="action-btn clean-btn" onclick="cleanPet()">
          üõÅ –ú—ã—Ç—å
        </button>
      </div>

      <div class="status-message" id="statusMessage">
        –¢–≤–æ–π –ø–∏—Ç–æ–º–µ—Ü —Ç–æ–ª—å–∫–æ —á—Ç–æ —Ä–æ–¥–∏–ª—Å—è! –ü–æ–∑–∞–±–æ—Ç—å—Å—è –æ –Ω—ë–º! ü•∞
      </div>

      <div class="minigame-section" id="minigameSection">
        <div class="minigame-title">üéØ –ò–≥—Ä–∞ "–£–≥–∞–¥–∞–π —Ü–≤–µ—Ç!"</div>
        <p>–ó–∞–ø–æ–º–Ω–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –ø–æ–≤—Ç–æ—Ä–∏ –µ—ë!</p>
        <div id="sequenceDisplay" style="font-size: 2rem; margin: 10px 0">
          –ì–æ—Ç–æ–≤?
        </div>
        <div class="color-buttons" id="colorButtons" style="display: none">
          <button
            class="color-btn"
            style="background: #e74c3c"
            onclick="playerChoice('red')"
          ></button>
          <button
            class="color-btn"
            style="background: #2ecc71"
            onclick="playerChoice('green')"
          ></button>
          <button
            class="color-btn"
            style="background: #3498db"
            onclick="playerChoice('blue')"
          ></button>
        </div>
        <button class="action-btn" onclick="endMinigame()">
          –ó–∞–∫–æ–Ω—á–∏—Ç—å –∏–≥—Ä—É
        </button>
      </div>

      <div class="game-stats">
        <div class="game-stat">
          <span class="stat-number" id="level">1</span>
          <span class="stat-name">–£—Ä–æ–≤–µ–Ω—å</span>
        </div>
        <div class="game-stat">
          <span class="stat-number" id="age">0</span>
          <span class="stat-name">–í–æ–∑—Ä–∞—Å—Ç</span>
        </div>
        <div class="game-stat">
          <span class="stat-number" id="happiness-count">0</span>
          <span class="stat-name">–†–∞–¥–æ—Å—Ç—å</span>
        </div>
        <div class="game-stat">
          <span class="stat-number" id="care-count">0</span>
          <span class="stat-name">–£—Ö–æ–¥</span>
        </div>
      </div>

      <div class="save-load-buttons">
        <button class="save-btn" onclick="savePet()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        <button class="load-btn" onclick="loadPet()">üìÅ –ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
      </div>

      <div class="achievements-section">
        <h4 style="margin-top: 0; color: #e67e22">üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è:</h4>
        <div id="achievementsList">
          –£—Ö–∞–∂–∏–≤–∞–π –∑–∞ –ø–∏—Ç–æ–º—Ü–µ–º, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è!
        </div>
      </div>
    </div>

    <div class="evolution-popup" id="evolutionPopup">
      <h2>üéâ –≠–í–û–õ–Æ–¶–ò–Ø! üéâ</h2>
      <p id="evolutionText"></p>
      <button class="action-btn" onclick="closeEvolution()">–°—É–ø–µ—Ä! üåü</button>
    </div>

    <script>
      // –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø–∏—Ç–æ–º—Ü–∞
      let pet = {
        name: "–ü—É—à–∏—Å—Ç–∏–∫",
        stage: 0, // 0-—è–π—Ü–æ, 1-–º–∞–ª—ã—à, 2-–ø–æ–¥—Ä–æ—Å—Ç–æ–∫, 3-–≤–∑—Ä–æ—Å–ª—ã–π, 4-–º—É–¥—Ä–µ—Ü
        hunger: 100,
        happiness: 100,
        energy: 100,
        cleanliness: 100,
        level: 1,
        age: 0,
        happinessCount: 0,
        careCount: 0,
        birthTime: Date.now(),
      };

      // –°—Ç–∞–¥–∏–∏ —ç–≤–æ–ª—é—Ü–∏–∏
      const evolutionStages = [
        { emoji: "ü•ö", name: "–Ø–π—Ü–æ", minAge: 0 },
        { emoji: "üê£", name: "–ü—Ç–µ–Ω—á–∏–∫", minAge: 2 },
        { emoji: "üê§", name: "–ú–∞–ª—ã—à", minAge: 5 },
        { emoji: "üê¶", name: "–ü–æ–¥—Ä–æ—Å—Ç–æ–∫", minAge: 10 },
        { emoji: "ü¶Ö", name: "–í–∑—Ä–æ—Å–ª—ã–π", minAge: 20 },
      ];

      let gameInterval;
      let minigame = {
        active: false,
        sequence: [],
        playerSequence: [],
        currentStep: 0,
        colors: ["red", "green", "blue"],
      };

      let achievements = [];
      const achievementsList = [
        {
          id: "first_feed",
          name: "üçé –ü–µ—Ä–≤–æ–µ –∫–æ—Ä–º–ª–µ–Ω–∏–µ",
          condition: () => pet.careCount >= 1,
        },
        {
          id: "happy_pet",
          name: "üòä –°—á–∞—Å—Ç–ª–∏–≤—á–∏–∫",
          condition: () => pet.happinessCount >= 10,
        },
        {
          id: "grow_up",
          name: "üå± –í–∑—Ä–æ—Å–ª–µ–Ω–∏–µ",
          condition: () => pet.stage >= 2,
        },
        {
          id: "long_life",
          name: "‚è∞ –î–æ–ª–≥–æ–∂–∏—Ç–µ–ª—å",
          condition: () => pet.age >= 15,
        },
        {
          id: "max_level",
          name: "üí´ –ú–∞—Å—Ç–µ—Ä —É—Ö–æ–¥–∞",
          condition: () => pet.level >= 10,
        },
      ];

      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
      function initGame() {
        updateDisplay();
        updateStats();
        startGameLoop();
      }

      // –û—Å–Ω–æ–≤–Ω–æ–π –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
      function startGameLoop() {
        gameInterval = setInterval(() => {
          // –£–º–µ–Ω—å—à–∞–µ–º –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º
          pet.hunger = Math.max(0, pet.hunger - 0.5);
          pet.happiness = Math.max(0, pet.happiness - 0.3);
          pet.energy = Math.max(0, pet.energy - 0.2);
          pet.cleanliness = Math.max(0, pet.cleanliness - 0.1);

          // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –≤–æ–∑—Ä–∞—Å—Ç
          pet.age = Math.floor((Date.now() - pet.birthTime) / 60000); // –º–∏–Ω—É—Ç—ã

          // –ü—Ä–æ–≤–µ—Ä—è–µ–º —ç–≤–æ–ª—é—Ü–∏—é
          checkEvolution();

          // –û–±–Ω–æ–≤–ª—è–µ–º —É—Ä–æ–≤–µ–Ω—å –Ω–∞ –æ—Å–Ω–æ–≤–µ —É—Ö–æ–¥–∞
          pet.level = Math.floor(pet.careCount / 5) + 1;

          updateDisplay();
          updateStats();
          checkStatus();
          checkAchievements();
        }, 1000);
      }

      // –ö–æ—Ä–º–ª–µ–Ω–∏–µ –ø–∏—Ç–æ–º—Ü–∞
      function feedPet() {
        if (pet.hunger < 100) {
          pet.hunger = Math.min(100, pet.hunger + 25);
          pet.careCount++;
          showEmotion("üçé");
          setStatus("–ù—è–º-–Ω—è–º! –í–∫—É—Å–Ω–æ! üòã");
        } else {
          setStatus("–Ø —Å—ã—Ç! –°–ø–∞—Å–∏–±–æ! üòä");
        }
      }

      // –ù–∞—á–∞–ª–æ –º–∏–Ω–∏-–∏–≥—Ä—ã
      function startMinigame() {
        if (pet.energy < 20) {
          setStatus("–Ø —Å–ª–∏—à–∫–æ–º —É—Å—Ç–∞–ª –¥–ª—è –∏–≥—Ä—ã... üò¥");
          return;
        }

        minigame.active = true;
        minigame.sequence = [];
        minigame.playerSequence = [];
        minigame.currentStep = 0;

        // –°–æ–∑–¥–∞—ë–º —Å–ª—É—á–∞–π–Ω—É—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å
        for (let i = 0; i < 3 + Math.floor(pet.level / 3); i++) {
          minigame.sequence.push(
            minigame.colors[Math.floor(Math.random() * 3)]
          );
        }

        document.getElementById("minigameSection").style.display = "block";
        showSequence();
      }

      // –ü–æ–∫–∞–∑ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Ü–≤–µ—Ç–æ–≤
      function showSequence() {
        const display = document.getElementById("sequenceDisplay");
        const colorEmojis = { red: "üî¥", green: "üü¢", blue: "üîµ" };

        let step = 0;
        const showNext = () => {
          if (step < minigame.sequence.length) {
            display.textContent = colorEmojis[minigame.sequence[step]];
            step++;
            setTimeout(showNext, 1000);
          } else {
            display.textContent = "–ü–æ–≤—Ç–æ—Ä–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å!";
            document.getElementById("colorButtons").style.display = "grid";
          }
        };
        showNext();
      }

      // –í—ã–±–æ—Ä –∏–≥—Ä–æ–∫–∞ –≤ –º–∏–Ω–∏-–∏–≥—Ä–µ
      function playerChoice(color) {
        minigame.playerSequence.push(color);

        if (
          minigame.playerSequence[minigame.currentStep] ===
          minigame.sequence[minigame.currentStep]
        ) {
          minigame.currentStep++;

          if (minigame.currentStep === minigame.sequence.length) {
            // –ü–æ–±–µ–¥–∞!
            pet.happiness = Math.min(100, pet.happiness + 30);
            pet.energy = Math.max(0, pet.energy - 10);
            pet.happinessCount++;
            showEmotion("üéâ");
            setStatus("–û—Ç–ª–∏—á–Ω–æ! –¢—ã –≤—ã–∏–≥—Ä–∞–ª! üèÜ");
            endMinigame();
          }
        } else {
          // –û—à–∏–±–∫–∞
          setStatus("–ù–µ –ø–æ–ª—É—á–∏–ª–æ—Å—å... –ü–æ–ø—Ä–æ–±—É–µ–º –µ—â—ë —Ä–∞–∑! üòÖ");
          endMinigame();
        }
      }

      // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –º–∏–Ω–∏-–∏–≥—Ä—ã
      function endMinigame() {
        minigame.active = false;
        document.getElementById("minigameSection").style.display = "none";
        document.getElementById("colorButtons").style.display = "none";
      }

      // –°–æ–Ω
      function putToSleep() {
        if (pet.energy < 100) {
          pet.energy = Math.min(100, pet.energy + 40);
          pet.careCount++;
          showEmotion("üí§");
          setStatus("–•–æ—Ä–æ—à–æ –ø–æ—Å–ø–∞–ª! –ü–æ–ª–æ–Ω —ç–Ω–µ—Ä–≥–∏–∏! üò¥");
        } else {
          setStatus("–Ø –Ω–µ —Ö–æ—á—É —Å–ø–∞—Ç—å! üòä");
        }
      }

      // –ú—ã—Ç—å—ë
      function cleanPet() {
        if (pet.cleanliness < 100) {
          pet.cleanliness = Math.min(100, pet.cleanliness + 30);
          pet.careCount++;
          showEmotion("üõÅ");
          setStatus("–¢–µ–ø–µ—Ä—å —è —á–∏—Å—Ç—ã–π –∏ –∫—Ä–∞—Å–∏–≤—ã–π! ‚ú®");
        } else {
          setStatus("–Ø —É–∂–µ —á–∏—Å—Ç—ã–π! üòä");
        }
      }

      // –ü—Ä–æ–≤–µ—Ä–∫–∞ —ç–≤–æ–ª—é—Ü–∏–∏
      function checkEvolution() {
        const currentStage = pet.stage;

        for (let i = evolutionStages.length - 1; i > currentStage; i--) {
          if (pet.age >= evolutionStages[i].minAge) {
            pet.stage = i;
            showEvolution(i);
            break;
          }
        }
      }

      // –ü–æ–∫–∞–∑ —ç–≤–æ–ª—é—Ü–∏–∏
      function showEvolution(stage) {
        const popup = document.getElementById("evolutionPopup");
        const text = document.getElementById("evolutionText");

        text.innerHTML = `
                ${pet.name} —ç–≤–æ–ª—é—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–ª!<br>
                ${evolutionStages[stage].emoji} ${evolutionStages[stage].name}<br>
                <small>–í–æ–∑—Ä–∞—Å—Ç: ${pet.age} –º–∏–Ω—É—Ç</small>
            `;

        popup.style.display = "block";
      }

      // –ó–∞–∫—Ä—ã—Ç–∏–µ –æ–∫–Ω–∞ —ç–≤–æ–ª—é—Ü–∏–∏
      function closeEvolution() {
        document.getElementById("evolutionPopup").style.display = "none";
      }

      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
      function updateDisplay() {
        const stage = evolutionStages[pet.stage];
        document.getElementById("petDisplay").textContent = stage.emoji;
        document.getElementById(
          "petName"
        ).textContent = `${pet.name} (${stage.name})`;

        document.getElementById("hungerBar").style.width = pet.hunger + "%";
        document.getElementById("happinessBar").style.width =
          pet.happiness + "%";
        document.getElementById("energyBar").style.width = pet.energy + "%";
        document.getElementById("cleanlinessBar").style.width =
          pet.cleanliness + "%";

        document.getElementById("lifeTime").textContent = pet.age + " –º–∏–Ω";
      }

      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
      function updateStats() {
        document.getElementById("level").textContent = pet.level;
        document.getElementById("age").textContent = pet.age;
        document.getElementById("happiness-count").textContent =
          pet.happinessCount;
        document.getElementById("care-count").textContent = pet.careCount;
      }

      // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–∏—Ç–æ–º—Ü–∞
      function checkStatus() {
        if (pet.hunger < 20) {
          setStatus("–Ø –≥–æ–ª–æ–¥–Ω—ã–π! –ü–æ–∫–æ—Ä–º–∏ –º–µ–Ω—è! üçé");
        } else if (pet.energy < 20) {
          setStatus("–Ø —É—Å—Ç–∞–ª... –•–æ—á—É —Å–ø–∞—Ç—å! üí§");
        } else if (pet.cleanliness < 30) {
          setStatus("–Ø –≥—Ä—è–∑–Ω—ã–π! –ü–æ–º–æ–π –º–µ–Ω—è! üõÅ");
        } else if (pet.happiness < 30) {
          setStatus("–ú–Ω–µ —Å–∫—É—á–Ω–æ! –î–∞–≤–∞–π –ø–æ–∏–≥—Ä–∞–µ–º! üéÆ");
        } else if (pet.hunger > 80 && pet.happiness > 80 && pet.energy > 80) {
          setStatus("–Ø –æ—á–µ–Ω—å —Å—á–∞—Å—Ç–ª–∏–≤! –°–ø–∞—Å–∏–±–æ –∑–∞ –∑–∞–±–æ—Ç—É! üòä");
        }
      }

      // –ü–æ–∫–∞–∑ —ç–º–æ—Ü–∏–π
      function showEmotion(emoji) {
        const emotion = document.createElement("div");
        emotion.className = "emotion";
        emotion.textContent = emoji;
        emotion.style.left = Math.random() * (window.innerWidth - 50) + "px";
        emotion.style.top = Math.random() * (window.innerHeight - 50) + "px";

        document.body.appendChild(emotion);
        setTimeout(() => emotion.remove(), 2000);
      }

      // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
      function setStatus(message) {
        document.getElementById("statusMessage").textContent = message;
      }

      // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
      function checkAchievements() {
        achievementsList.forEach((achievement) => {
          if (
            !achievements.includes(achievement.id) &&
            achievement.condition()
          ) {
            achievements.push(achievement.id);
            showEmotion("üèÜ");
            setStatus(`üéâ –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ: ${achievement.name}!`);
            updateAchievements();
          }
        });
      }

      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
      function updateAchievements() {
        const list = document.getElementById("achievementsList");

        if (achievements.length === 0) {
          list.innerHTML = "–£—Ö–∞–∂–∏–≤–∞–π –∑–∞ –ø–∏—Ç–æ–º—Ü–µ–º, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è!";
          return;
        }

        list.innerHTML = achievementsList
          .filter((a) => achievements.includes(a.id))
          .map((a) => `<span class="achievement">${a.name}</span>`)
          .join("");
      }

      // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–∏—Ç–æ–º—Ü–∞
      function savePet() {
        localStorage.setItem("virtualPet", JSON.stringify(pet));
        localStorage.setItem("petAchievements", JSON.stringify(achievements));
        setStatus("–ü–∏—Ç–æ–º–µ—Ü —Å–æ—Ö—Ä–∞–Ω—ë–Ω! üíæ");
      }

      // –ó–∞–≥—Ä—É–∑–∫–∞ –ø–∏—Ç–æ–º—Ü–∞
      function loadPet() {
        const savedPet = localStorage.getItem("virtualPet");
        const savedAchievements = localStorage.getItem("petAchievements");

        if (savedPet) {
          pet = JSON.parse(savedPet);
          if (savedAchievements) {
            achievements = JSON.parse(savedAchievements);
          }
          updateDisplay();
          updateStats();
          updateAchievements();
          setStatus("–ü–∏—Ç–æ–º–µ—Ü –∑–∞–≥—Ä—É–∂–µ–Ω! üìÅ");
        } else {
          setStatus("–ù–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö! üòÖ");
        }
      }

      // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
      document.addEventListener("DOMContentLoaded", function () {
        initGame();
      });
    </script>
  </body>
</html>
